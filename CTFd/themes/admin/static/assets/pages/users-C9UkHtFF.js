import{C as u,M as m}from"./main-fLwNSudD.js";function f(r){const t=document.querySelectorAll("input[data-user-id]:checked"),o=Array.from(t).map(e=>e.dataset.userId),a=o.length===1?"user":"users";if(o.length===0){alert("Please select at least one user to delete.");return}if(!confirm(`Are you sure you want to delete ${o.length} ${a}?`))return;const s=o.map(e=>u.fetch(`/api/v1/users/${e}`,{method:"DELETE",credentials:"same-origin"}));Promise.all(s).then(()=>{window.location.reload()}).catch(e=>{console.error("Failed to delete users:",e),alert("An error occurred while deleting users.")})}function h(r){const t=document.getElementById("bulkEditModal");if(!t){console.error("Modal element not found");return}const o=t.querySelector("#users-bulk-edit-form");if(!o){console.error("Modal form not found");return}const a=document.querySelectorAll("input[data-user-id]:checked"),d=Array.from(a).map(e=>e.dataset.userId);if(d.length===0){alert("Please select at least one user.");return}const s=new m(t);s.show(),o.onsubmit=async function(e){e.preventDefault();const i=new FormData(o),l={};for(const[n,c]of i.entries())c!==""&&(l[n]=c==="true");try{await Promise.all(d.map(n=>u.fetch(`/api/v1/users/${n}`,{method:"PATCH",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(l)}))),s.hide(),window.location.reload()}catch(n){console.error("Bulk update failed:",n),alert("Failed to update users.")}}}document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("users-delete-button"),t=document.getElementById("users-edit-button");r?r.addEventListener("click",f):console.warn("Delete button not found: #users-delete-button"),t?t.addEventListener("click",h):console.warn("Edit button not found: #users-edit-button")});
