import{C as i,M as g}from"./main-fLwNSudD.js";function m(n){n.preventDefault();const l=document.querySelectorAll("input[data-challenge-id]:checked"),t=Array.from(l).map(e=>e.dataset.challengeId),c=t.length===1?"challenge":"challenges";if(t.length===0){alert("Please select at least one challenge to delete.");return}if(!confirm(`Are you sure you want to delete ${t.length} ${c}?`))return;const a=t.map(e=>i.fetch(`/api/v1/challenges/${e}`,{method:"DELETE",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}));Promise.all(a).then(()=>{window.location.reload()}).catch(e=>{console.error("Failed to delete challenges:",e),alert("An error occurred while deleting challenges.")})}function f(n){n.preventDefault();const l=document.querySelectorAll("input[data-challenge-id]:checked"),t=Array.from(l).map(e=>e.dataset.challengeId);if(t.length===0){alert("Please select at least one challenge to edit.");return}const c=document.getElementById("challengesBulkEditModal"),s=new g(c);s.show();const a=document.getElementById("challenges-bulk-edit-form");a.onsubmit=async function(e){e.preventDefault();const h=new FormData(a),d={};for(const[o,r]of h.entries())r!==""&&(d[o]=o==="value"?Number(r):r);const u=t.map(o=>i.fetch(`/api/v1/challenges/${o}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(d)}));try{await Promise.all(u),s.hide(),window.location.reload()}catch(o){console.error("Bulk edit failed:",o),alert("An error occurred while editing challenges.")}}}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("challenges-delete-button"),l=document.getElementById("challenges-edit-button");n?n.addEventListener("click",m):console.warn("Missing #challenges-delete-button"),l?l.addEventListener("click",f):console.warn("Missing #challenges-edit-button")});
