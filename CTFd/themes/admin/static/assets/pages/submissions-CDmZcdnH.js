import{C as l}from"./main-fLwNSudD.js";function m(s){var a,u;s.preventDefault();const t=s.currentTarget,o=t.dataset.submissionId,e=t.closest("tr");if(!e)return;const n=((a=e.querySelector(".chal"))==null?void 0:a.textContent.trim())||"Unknown Challenge",r=((u=e.querySelector(".team"))==null?void 0:u.textContent.trim())||"Unknown Team";confirm(`Are you sure you want to delete correct submission from "${r}" for challenge "${n}"?`)&&l.api.delete_submission({submissionId:o}).then(c=>{c.success&&e?e.remove():alert("Failed to delete submission.")}).catch(c=>{console.error("Error deleting submission:",c),alert("An unexpected error occurred.")})}function f(s){s.preventDefault();const t=document.querySelectorAll("input[data-submission-id]:checked"),o=Array.from(t).map(i=>i.dataset.submissionId),e=o.length===1?"submission":"submissions";if(o.length===0){alert("Please select at least one submission to delete.");return}if(!confirm(`Are you sure you want to delete ${o.length} ${e}?`))return;const r=o.map(i=>l.api.delete_submission({submissionId:i}));Promise.all(r).then(()=>{window.location.reload()}).catch(i=>{console.error("Failed to delete submissions:",i),alert("An error occurred while deleting submissions.")})}function b(s){s.preventDefault();const t=document.querySelectorAll("input[data-submission-id]:checked"),o=Array.from(t).map(i=>i.dataset.submissionId),e=o.length===1?"submission":"submissions";if(o.length===0){alert("Please select at least one submission to correct.");return}if(!confirm(`Are you sure you want to mark ${o.length} ${e} correct?`))return;const r=o.map(i=>l.fetch(`/api/v1/submissions/${i}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({type:"correct"})}));Promise.all(r).then(()=>{window.location.reload()}).catch(i=>{console.error("Failed to mark submissions correct:",i),alert("An error occurred while updating submissions.")})}function d(s){s.preventDefault();const t=new URLSearchParams(window.location.search);t.has("full")?t.delete("full"):t.set("full","true"),window.location.href=`${window.location.pathname}?${t.toString()}`}function h(s){s.preventDefault();const t=s.currentTarget,o=t.closest("td"),e=o==null?void 0:o.querySelector("pre"),n=t.querySelector("i");if(!e||!n)return;const r=e.getAttribute("title");e.classList.contains("full-flag")?(e.textContent=`${r.substring(0,42)}...`,e.classList.remove("full-flag"),n.classList.replace("fa-eye-slash","fa-eye")):(e.textContent=r,e.classList.add("full-flag"),n.classList.replace("fa-eye","fa-eye-slash"))}function g(s){var n;s.preventDefault();const t=s.currentTarget,o=(n=t.closest("td"))==null?void 0:n.querySelector("pre");if(!o)return;const e=o.getAttribute("title");navigator.clipboard.writeText(e).then(()=>{if(window.bootstrap){let r=bootstrap.Tooltip.getInstance(t);r||(r=new bootstrap.Tooltip(t,{title:"Copied!",trigger:"manual"})),r.show(),setTimeout(()=>r.hide(),1500)}else alert("Copied to clipboard")})}document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("show-full-flags-button"),t=document.getElementById("show-short-flags-button"),o=document.getElementById("correct-flags-button"),e=document.getElementById("submission-delete-button");s&&s.addEventListener("click",d),t&&t.addEventListener("click",d),o&&o.addEventListener("click",b),e&&e.addEventListener("click",f),document.querySelectorAll(".show-flag").forEach(n=>n.addEventListener("click",h)),document.querySelectorAll(".copy-flag").forEach(n=>n.addEventListener("click",g)),document.querySelectorAll(".delete-correct-submission").forEach(n=>n.addEventListener("click",m))});
