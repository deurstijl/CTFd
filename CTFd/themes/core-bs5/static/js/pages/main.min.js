import{s as Ke}from"../styles.min.js";import{C as be}from"../core.min.js";import{$ as Te}from"../jquery.min.js";import{d as Le}from"../dayjs.min.min.js";import{a as Me,t as je}from"../times.min.js";import{g as De}from"../_commonjsHelpers.min.js";import{h as Ue,e as Ve}from"../events.min.js";import{c as Ge}from"../config.min.js";import{h as We}from"../helpers.min.js";import"../index.min.js";import"../patch.min.js";import"../api.min.js";import"../fetch.min.js";import"../ezq.min.js";import"../utils.min.js";var we={exports:{}};/*! Browser bundle of nunjucks 3.2.4  */var He=we.exports,xe;function Ye(){return xe||(xe=1,function(Ae,Je){(function(D,C){Ae.exports=C()})(typeof self<"u"?self:He,function(){return function(H){var D={};function C(_){if(D[_])return D[_].exports;var x=D[_]={i:_,l:!1,exports:{}};return H[_].call(x.exports,x,x.exports,C),x.l=!0,x.exports}return C.m=H,C.c=D,C.d=function(_,x,m){C.o(_,x)||Object.defineProperty(_,x,{configurable:!1,enumerable:!0,get:m})},C.n=function(_){var x=_&&_.__esModule?function(){return _.default}:function(){return _};return C.d(x,"a",x),x},C.o=function(_,x){return Object.prototype.hasOwnProperty.call(_,x)},C.p="",C(C.s=11)}([function(H,y,C){var _=Array.prototype,x=Object.prototype,m={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\\":"&#92;"},E=/[&"'<>\\]/g,y=H.exports={};function O(f,k){return x.hasOwnProperty.call(f,k)}y.hasOwnProp=O;function P(f){return m[f]}function I(f,k,F){if(F.Update||(F=new y.TemplateError(F)),F.Update(f),!k){var B=F;F=new Error(B.message),F.name=B.name}return F}y._prettifyError=I;function N(f,k,F){var B,U;f instanceof Error&&(U=f,f=U.name+": "+U.message),Object.setPrototypeOf?(B=new Error(f),Object.setPrototypeOf(B,N.prototype)):(B=this,Object.defineProperty(B,"message",{enumerable:!1,writable:!0,value:f})),Object.defineProperty(B,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(B,this.constructor);var Z;if(U){var z=Object.getOwnPropertyDescriptor(U,"stack");Z=z&&(z.get||function(){return z.value}),Z||(Z=function(){return U.stack})}else{var se=new Error(f).stack;Z=function(){return se}}return Object.defineProperty(B,"stack",{get:function(){return Z.call(B)}}),Object.defineProperty(B,"cause",{value:U}),B.lineno=k,B.colno=F,B.firstUpdate=!0,B.Update=function(X){var q="("+(X||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?q+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(q+=" [Line "+this.lineno+"]")),q+=`
 `,this.firstUpdate&&(q+=" "),this.message=q+(this.message||""),this.firstUpdate=!1,this},B}Object.setPrototypeOf?Object.setPrototypeOf(N.prototype,Error.prototype):N.prototype=Object.create(Error.prototype,{constructor:{value:N}}),y.TemplateError=N;function g(f){return f.replace(E,P)}y.escape=g;function T(f){return x.toString.call(f)==="[object Function]"}y.isFunction=T;function e(f){return x.toString.call(f)==="[object Array]"}y.isArray=e;function n(f){return x.toString.call(f)==="[object String]"}y.isString=n;function i(f){return x.toString.call(f)==="[object Object]"}y.isObject=i;function p(f){return f?typeof f=="string"?f.split("."):[f]:[]}function l(f){var k=p(f);return function(B){for(var U=B,Z=0;Z<k.length;Z++){var z=k[Z];if(O(U,z))U=U[z];else return}return U}}y.getAttrGetter=l;function h(f,k,F){for(var B={},U=T(k)?k:l(k),Z=0;Z<f.length;Z++){var z=f[Z],se=U(z,Z);if(se===void 0&&F===!0)throw new TypeError('groupby: attribute "'+k+'" resolved to undefined');(B[se]||(B[se]=[])).push(z)}return B}y.groupBy=h;function t(f){return Array.prototype.slice.call(f)}y.toArray=t;function r(f){var k=[];if(!f)return k;for(var F=f.length,B=t(arguments).slice(1),U=-1;++U<F;)w(B,f[U])===-1&&k.push(f[U]);return k}y.without=r;function a(f,k){for(var F="",B=0;B<k;B++)F+=f;return F}y.repeat=a;function o(f,k,F){if(f!=null){if(_.forEach&&f.forEach===_.forEach)f.forEach(k,F);else if(f.length===+f.length)for(var B=0,U=f.length;B<U;B++)k.call(F,f[B],B,f)}}y.each=o;function s(f,k){var F=[];if(f==null)return F;if(_.map&&f.map===_.map)return f.map(k);for(var B=0;B<f.length;B++)F[F.length]=k(f[B],B);return f.length===+f.length&&(F.length=f.length),F}y.map=s;function c(f,k,F){var B=-1;function U(){B++,B<f.length?k(f[B],B,U,F):F()}U()}y.asyncIter=c;function u(f,k,F){var B=L(f||{}),U=B.length,Z=-1;function z(){Z++;var se=B[Z];Z<U?k(se,f[se],Z,U,z):F()}z()}y.asyncFor=u;function w(f,k,F){return Array.prototype.indexOf.call(f||[],k,F)}y.indexOf=w;function L(f){var k=[];for(var F in f)O(f,F)&&k.push(F);return k}y.keys=L;function b(f){return L(f).map(function(k){return[k,f[k]]})}y._entries=b;function A(f){return L(f).map(function(k){return f[k]})}y._values=A;function R(f,k){return f=f||{},L(k).forEach(function(F){f[F]=k[F]}),f}y._assign=y.extend=R;function d(f,k){if(e(k)||n(k))return k.indexOf(f)!==-1;if(i(k))return f in k;throw new Error('Cannot use "in" operator to search for "'+f+'" in unexpected types.')}y.inOperator=d},function(H,D,C){function _(n,i){for(var p=0;p<i.length;p++){var l=i[p];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,m(l.key),l)}}function x(n,i,p){return i&&_(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function m(n){var i=E(n,"string");return typeof i=="symbol"?i:String(i)}function E(n,i){if(typeof n!="object"||n===null)return n;var p=n[Symbol.toPrimitive];if(p!==void 0){var l=p.call(n,i);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function y(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,O(n,i)}function O(n,i){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,h){return l.__proto__=h,l},O(n,i)}var P=C(16),I=C(0);function N(n,i){return typeof n!="function"||typeof i!="function"?i:function(){var l=this.parent;this.parent=n;var h=i.apply(this,arguments);return this.parent=l,h}}function g(n,i,p){p=p||{},I.keys(p).forEach(function(h){p[h]=N(n.prototype[h],p[h])});var l=function(h){y(t,h);function t(){return h.apply(this,arguments)||this}return x(t,[{key:"typename",get:function(){return i}}]),t}(n);return I._assign(l.prototype,p),l}var T=function(){function n(){this.init.apply(this,arguments)}var i=n.prototype;return i.init=function(){},n.extend=function(l,h){return typeof l=="object"&&(h=l,l="anonymous"),g(this,l,h)},x(n,[{key:"typename",get:function(){return this.constructor.name}}]),n}(),e=function(n){y(i,n);function i(){var l,h;return h=n.call(this)||this,(l=h).init.apply(l,arguments),h}var p=i.prototype;return p.init=function(){},i.extend=function(h,t){return typeof h=="object"&&(t=h,h="anonymous"),g(this,h,t)},x(i,[{key:"typename",get:function(){return this.constructor.name}}]),i}(P);H.exports={Obj:T,EmitterObj:e}},function(H,D,C){var _=C(0),x=Array.from,m=typeof Symbol=="function"&&Symbol.iterator&&typeof x=="function",E=function(){function s(u,w){this.variables=Object.create(null),this.parent=u,this.topLevel=!1,this.isolateWrites=w}var c=s.prototype;return c.set=function(w,L,b){var A=w.split("."),R=this.variables,d=this;if(b&&(d=this.resolve(A[0],!0))){d.set(w,L);return}for(var f=0;f<A.length-1;f++){var k=A[f];R[k]||(R[k]={}),R=R[k]}R[A[A.length-1]]=L},c.get=function(w){var L=this.variables[w];return L!==void 0?L:null},c.lookup=function(w){var L=this.parent,b=this.variables[w];return b!==void 0?b:L&&L.lookup(w)},c.resolve=function(w,L){var b=L&&this.isolateWrites?void 0:this.parent,A=this.variables[w];return A!==void 0?this:b&&b.resolve(w)},c.push=function(w){return new s(this,w)},c.pop=function(){return this.parent},s}();function y(s,c,u){return function(){for(var L=arguments.length,b=new Array(L),A=0;A<L;A++)b[A]=arguments[A];var R=N(b),d,f=I(b);if(R>s.length)d=b.slice(0,s.length),b.slice(d.length,R).forEach(function(B,U){U<c.length&&(f[c[U]]=B)}),d.push(f);else if(R<s.length){d=b.slice(0,R);for(var k=R;k<s.length;k++){var F=s[k];d.push(f[F]),delete f[F]}d.push(f)}else d=b;return u.apply(this,d)}}function O(s){return s.__keywords=!0,s}function P(s){return s&&Object.prototype.hasOwnProperty.call(s,"__keywords")}function I(s){var c=s.length;if(c){var u=s[c-1];if(P(u))return u}return{}}function N(s){var c=s.length;if(c===0)return 0;var u=s[c-1];return P(u)?c-1:c}function g(s){if(typeof s!="string")return s;this.val=s,this.length=s.length}g.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),g.prototype.valueOf=function(){return this.val},g.prototype.toString=function(){return this.val};function T(s,c){return s instanceof g?new g(c):c.toString()}function e(s){var c=typeof s;return c==="string"?new g(s):c!=="function"?s:function(w){var L=s.apply(this,arguments);return typeof L=="string"?new g(L):L}}function n(s,c){return s=s??"",c&&!(s instanceof g)&&(s=_.escape(s.toString())),s}function i(s,c,u){if(s==null)throw new _.TemplateError("attempted to output null or undefined value",c+1,u+1);return s}function p(s,c){if(s!=null)return typeof s[c]=="function"?function(){for(var u=arguments.length,w=new Array(u),L=0;L<u;L++)w[L]=arguments[L];return s[c].apply(s,w)}:s[c]}function l(s,c,u,w){if(s){if(typeof s!="function")throw new Error("Unable to call `"+c+"`, which is not a function")}else throw new Error("Unable to call `"+c+"`, which is undefined or falsey");return s.apply(u,w)}function h(s,c,u){var w=c.lookup(u);return w!==void 0?w:s.lookup(u)}function t(s,c,u){return s.lineno?s:new _.TemplateError(s,c,u)}function r(s,c,u,w){if(_.isArray(s)){var L=s.length;_.asyncIter(s,function(A,R,d){switch(c){case 1:u(A,R,L,d);break;case 2:u(A[0],A[1],R,L,d);break;case 3:u(A[0],A[1],A[2],R,L,d);break;default:A.push(R,L,d),u.apply(this,A)}},w)}else _.asyncFor(s,function(A,R,d,f,k){u(A,R,d,f,k)},w)}function a(s,c,u,w){var L=0,b,A;function R(U,Z){L++,A[U]=Z,L===b&&w(null,A.join(""))}if(_.isArray(s))if(b=s.length,A=new Array(b),b===0)w(null,"");else for(var d=0;d<s.length;d++){var f=s[d];switch(c){case 1:u(f,d,b,R);break;case 2:u(f[0],f[1],d,b,R);break;case 3:u(f[0],f[1],f[2],d,b,R);break;default:f.push(d,b,R),u.apply(this,f)}}else{var k=_.keys(s||{});if(b=k.length,A=new Array(b),b===0)w(null,"");else for(var F=0;F<k.length;F++){var B=k[F];u(B,s[B],F,b,R)}}}function o(s){return typeof s!="object"||s===null||_.isArray(s)?s:m&&Symbol.iterator in s?x(s):s}H.exports={Frame:E,makeMacro:y,makeKeywordArgs:O,numArgs:N,suppressValue:n,ensureDefined:i,memberLookup:p,contextOrFrameLookup:h,callWrap:l,handleError:t,isArray:_.isArray,keys:_.keys,SafeString:g,copySafeness:T,markSafe:e,asyncEach:r,asyncAll:a,inOperator:_.inOperator,fromIterator:o}},function(H,D,C){function _(W,Y){for(var ne=0;ne<Y.length;ne++){var ee=Y[ne];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(W,m(ee.key),ee)}}function x(W,Y,ne){return Y&&_(W.prototype,Y),Object.defineProperty(W,"prototype",{writable:!1}),W}function m(W){var Y=E(W,"string");return typeof Y=="symbol"?Y:String(Y)}function E(W,Y){if(typeof W!="object"||W===null)return W;var ne=W[Symbol.toPrimitive];if(ne!==void 0){var ee=ne.call(W,Y);if(typeof ee!="object")return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(W)}function y(W,Y){W.prototype=Object.create(Y.prototype),W.prototype.constructor=W,O(W,Y)}function O(W,Y){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ee,ie){return ee.__proto__=ie,ee},O(W,Y)}var P=C(1),I=P.Obj;function N(W,Y,ne){W instanceof Y&&ne.push(W),W instanceof g&&W.findAll(Y,ne)}var g=function(W){y(Y,W);function Y(){return W.apply(this,arguments)||this}var ne=Y.prototype;return ne.init=function(ie,ae){for(var fe=arguments,de=this,_e=arguments.length,Be=new Array(_e>2?_e-2:0),Ee=2;Ee<_e;Ee++)Be[Ee-2]=arguments[Ee];this.lineno=ie,this.colno=ae,this.fields.forEach(function(Pe,Ie){var Oe=fe[Ie+2];Oe===void 0&&(Oe=null),de[Pe]=Oe})},ne.findAll=function(ie,ae){var fe=this;return ae=ae||[],this instanceof e?this.children.forEach(function(de){return N(de,ie,ae)}):this.fields.forEach(function(de){return N(fe[de],ie,ae)}),ae},ne.iterFields=function(ie){var ae=this;this.fields.forEach(function(fe){ie(ae[fe],fe)})},Y}(I),T=function(W){y(Y,W);function Y(){return W.apply(this,arguments)||this}return x(Y,[{key:"typename",get:function(){return"Value"}},{key:"fields",get:function(){return["value"]}}]),Y}(g),e=function(W){y(Y,W);function Y(){return W.apply(this,arguments)||this}var ne=Y.prototype;return ne.init=function(ie,ae,fe){W.prototype.init.call(this,ie,ae,fe||[])},ne.addChild=function(ie){this.children.push(ie)},x(Y,[{key:"typename",get:function(){return"NodeList"}},{key:"fields",get:function(){return["children"]}}]),Y}(g),n=e.extend("Root"),i=T.extend("Literal"),p=T.extend("Symbol"),l=e.extend("Group"),h=e.extend("Array"),t=g.extend("Pair",{fields:["key","value"]}),r=e.extend("Dict"),a=g.extend("LookupVal",{fields:["target","val"]}),o=g.extend("If",{fields:["cond","body","else_"]}),s=o.extend("IfAsync"),c=g.extend("InlineIf",{fields:["cond","body","else_"]}),u=g.extend("For",{fields:["arr","name","body","else_"]}),w=u.extend("AsyncEach"),L=u.extend("AsyncAll"),b=g.extend("Macro",{fields:["name","args","body"]}),A=b.extend("Caller"),R=g.extend("Import",{fields:["template","target","withContext"]}),d=function(W){y(Y,W);function Y(){return W.apply(this,arguments)||this}var ne=Y.prototype;return ne.init=function(ie,ae,fe,de,_e){W.prototype.init.call(this,ie,ae,fe,de||new e,_e)},x(Y,[{key:"typename",get:function(){return"FromImport"}},{key:"fields",get:function(){return["template","names","withContext"]}}]),Y}(g),f=g.extend("FunCall",{fields:["name","args"]}),k=f.extend("Filter"),F=k.extend("FilterAsync",{fields:["name","args","symbol"]}),B=r.extend("KeywordArgs"),U=g.extend("Block",{fields:["name","body"]}),Z=g.extend("Super",{fields:["blockName","symbol"]}),z=g.extend("TemplateRef",{fields:["template"]}),se=z.extend("Extends"),ue=g.extend("Include",{fields:["template","ignoreMissing"]}),X=g.extend("Set",{fields:["targets","value"]}),q=g.extend("Switch",{fields:["expr","cases","default"]}),j=g.extend("Case",{fields:["cond","body"]}),G=e.extend("Output"),V=g.extend("Capture",{fields:["body"]}),te=i.extend("TemplateData"),ce=g.extend("UnaryOp",{fields:["target"]}),le=g.extend("BinOp",{fields:["left","right"]}),me=le.extend("In"),v=le.extend("Is"),S=le.extend("Or"),M=le.extend("And"),K=ce.extend("Not"),$=le.extend("Add"),J=le.extend("Concat"),re=le.extend("Sub"),Q=le.extend("Mul"),oe=le.extend("Div"),he=le.extend("FloorDiv"),pe=le.extend("Mod"),ve=le.extend("Pow"),Se=ce.extend("Neg"),Ne=ce.extend("Pos"),Ce=g.extend("Compare",{fields:["expr","ops"]}),Re=g.extend("CompareOperand",{fields:["expr","type"]}),ke=g.extend("CallExtension",{init:function(Y,ne,ee,ie){this.parent(),this.extName=Y.__name||Y,this.prop=ne,this.args=ee||new e,this.contentArgs=ie||[],this.autoescape=Y.autoescape},fields:["extName","prop","args","contentArgs"]}),Fe=ke.extend("CallExtensionAsync");function ye(W,Y,ne){var ee=W.split(`
`);ee.forEach(function(ie,ae){ie&&(ne&&ae>0||!ne)&&process.stdout.write(" ".repeat(Y));var fe=ae===ee.length-1?"":`
`;process.stdout.write(""+ie+fe)})}function ge(W,Y){if(Y=Y||0,ye(W.typename+": ",Y),W instanceof e)ye(`
`),W.children.forEach(function(ie){ge(ie,Y+2)});else if(W instanceof ke)ye(W.extName+"."+W.prop+`
`),W.args&&ge(W.args,Y+2),W.contentArgs&&W.contentArgs.forEach(function(ie){ge(ie,Y+2)});else{var ne=[],ee=null;W.iterFields(function(ie,ae){ie instanceof g?ne.push([ae,ie]):(ee=ee||{},ee[ae]=ie)}),ee?ye(JSON.stringify(ee,null,2)+`
`,null,!0):ye(`
`),ne.forEach(function(ie){var ae=ie[0],fe=ie[1];ye("["+ae+"] =>",Y+2),ge(fe,Y+4)})}}H.exports={Node:g,Root:n,NodeList:e,Value:T,Literal:i,Symbol:p,Group:l,Array:h,Pair:t,Dict:r,Output:G,Capture:V,TemplateData:te,If:o,IfAsync:s,InlineIf:c,For:u,AsyncEach:w,AsyncAll:L,Macro:b,Caller:A,Import:R,FromImport:d,FunCall:f,Filter:k,FilterAsync:F,KeywordArgs:B,Block:U,Super:Z,Extends:se,Include:ue,Set:X,Switch:q,Case:j,LookupVal:a,BinOp:le,In:me,Is:v,Or:S,And:M,Not:K,Add:$,Concat:J,Sub:re,Mul:Q,Div:oe,FloorDiv:he,Mod:pe,Pow:ve,Neg:Se,Pos:Ne,Compare:Ce,CompareOperand:Re,CallExtension:ke,CallExtensionAsync:Fe,printNodes:ge}},function(H,D){},function(H,D,C){function _(i,p){i.prototype=Object.create(p.prototype),i.prototype.constructor=i,x(i,p)}function x(i,p){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,t){return h.__proto__=t,h},x(i,p)}var m=C(8),E=C(17),y=C(3),O=C(0),P=O.TemplateError,I=C(2),N=I.Frame,g=C(1),T=g.Obj,e={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},n=function(i){_(p,i);function p(){return i.apply(this,arguments)||this}var l=p.prototype;return l.init=function(t,r){this.templateName=t,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this._scopeClosers="",this.inBlock=!1,this.throwOnUndefined=r},l.fail=function(t,r,a){throw r!==void 0&&(r+=1),a!==void 0&&(a+=1),new P(t,r,a)},l._pushBuffer=function(){var t=this._tmpid();return this.bufferStack.push(this.buffer),this.buffer=t,this._emit("var "+this.buffer+' = "";'),t},l._popBuffer=function(){this.buffer=this.bufferStack.pop()},l._emit=function(t){this.codebuf.push(t)},l._emitLine=function(t){this._emit(t+`
`)},l._emitLines=function(){for(var t=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];a.forEach(function(s){return t._emitLine(s)})},l._emitFuncBegin=function(t,r){this.buffer="output",this._scopeClosers="",this._emitLine("function "+r+"(env, context, frame, runtime, cb) {"),this._emitLine("var lineno = "+t.lineno+";"),this._emitLine("var colno = "+t.colno+";"),this._emitLine("var "+this.buffer+' = "";'),this._emitLine("try {")},l._emitFuncEnd=function(t){t||this._emitLine("cb(null, "+this.buffer+");"),this._closeScopeLevels(),this._emitLine("} catch (e) {"),this._emitLine("  cb(runtime.handleError(e, lineno, colno));"),this._emitLine("}"),this._emitLine("}"),this.buffer=null},l._addScopeLevel=function(){this._scopeClosers+="})"},l._closeScopeLevels=function(){this._emitLine(this._scopeClosers+";"),this._scopeClosers=""},l._withScopedSyntax=function(t){var r=this._scopeClosers;this._scopeClosers="",t.call(this),this._closeScopeLevels(),this._scopeClosers=r},l._makeCallback=function(t){var r=this._tmpid();return"function("+r+(t?","+t:"")+`) {
if(`+r+") { cb("+r+"); return; }"},l._tmpid=function(){return this.lastId++,"t_"+this.lastId},l._templateName=function(){return this.templateName==null?"undefined":JSON.stringify(this.templateName)},l._compileChildren=function(t,r){var a=this;t.children.forEach(function(o){a.compile(o,r)})},l._compileAggregate=function(t,r,a,o){var s=this;a&&this._emit(a),t.children.forEach(function(c,u){u>0&&s._emit(","),s.compile(c,r)}),o&&this._emit(o)},l._compileExpression=function(t,r){this.assertType(t,y.Literal,y.Symbol,y.Group,y.Array,y.Dict,y.FunCall,y.Caller,y.Filter,y.LookupVal,y.Compare,y.InlineIf,y.In,y.Is,y.And,y.Or,y.Not,y.Add,y.Concat,y.Sub,y.Mul,y.Div,y.FloorDiv,y.Mod,y.Pow,y.Neg,y.Pos,y.Compare,y.NodeList),this.compile(t,r)},l.assertType=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];a.some(function(s){return t instanceof s})||this.fail("assertType: invalid type: "+t.typename,t.lineno,t.colno)},l.compileCallExtension=function(t,r,a){var o=this,s=t.args,c=t.contentArgs,u=typeof t.autoescape=="boolean"?t.autoescape:!0;if(a||this._emit(this.buffer+" += runtime.suppressValue("),this._emit('env.getExtension("'+t.extName+'")["'+t.prop+'"]('),this._emit("context"),(s||c)&&this._emit(","),s&&(s instanceof y.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),s.children.forEach(function(L,b){o._compileExpression(L,r),(b!==s.children.length-1||c.length)&&o._emit(",")})),c.length&&c.forEach(function(L,b){if(b>0&&o._emit(","),L){o._emitLine("function(cb) {"),o._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");var A=o._pushBuffer();o._withScopedSyntax(function(){o.compile(L,r),o._emitLine("cb(null, "+A+");")}),o._popBuffer(),o._emitLine("return "+A+";"),o._emitLine("}")}else o._emit("null")}),a){var w=this._tmpid();this._emitLine(", "+this._makeCallback(w)),this._emitLine(this.buffer+" += runtime.suppressValue("+w+", "+u+" && env.opts.autoescape);"),this._addScopeLevel()}else this._emit(")"),this._emit(", "+u+` && env.opts.autoescape);
`)},l.compileCallExtensionAsync=function(t,r){this.compileCallExtension(t,r,!0)},l.compileNodeList=function(t,r){this._compileChildren(t,r)},l.compileLiteral=function(t){if(typeof t.value=="string"){var r=t.value.replace(/\\/g,"\\\\");r=r.replace(/"/g,'\\"'),r=r.replace(/\n/g,"\\n"),r=r.replace(/\r/g,"\\r"),r=r.replace(/\t/g,"\\t"),r=r.replace(/\u2028/g,"\\u2028"),this._emit('"'+r+'"')}else t.value===null?this._emit("null"):this._emit(t.value.toString())},l.compileSymbol=function(t,r){var a=t.value,o=r.lookup(a);o?this._emit(o):this._emit('runtime.contextOrFrameLookup(context, frame, "'+a+'")')},l.compileGroup=function(t,r){this._compileAggregate(t,r,"(",")")},l.compileArray=function(t,r){this._compileAggregate(t,r,"[","]")},l.compileDict=function(t,r){this._compileAggregate(t,r,"{","}")},l.compilePair=function(t,r){var a=t.key,o=t.value;a instanceof y.Symbol?a=new y.Literal(a.lineno,a.colno,a.value):a instanceof y.Literal&&typeof a.value=="string"||this.fail("compilePair: Dict keys must be strings or names",a.lineno,a.colno),this.compile(a,r),this._emit(": "),this._compileExpression(o,r)},l.compileInlineIf=function(t,r){this._emit("("),this.compile(t.cond,r),this._emit("?"),this.compile(t.body,r),this._emit(":"),t.else_!==null?this.compile(t.else_,r):this._emit('""'),this._emit(")")},l.compileIn=function(t,r){this._emit("runtime.inOperator("),this.compile(t.left,r),this._emit(","),this.compile(t.right,r),this._emit(")")},l.compileIs=function(t,r){var a=t.right.name?t.right.name.value:t.right.value;this._emit('env.getTest("'+a+'").call(context, '),this.compile(t.left,r),t.right.args&&(this._emit(","),this.compile(t.right.args,r)),this._emit(") === true")},l._binOpEmitter=function(t,r,a){this.compile(t.left,r),this._emit(a),this.compile(t.right,r)},l.compileOr=function(t,r){return this._binOpEmitter(t,r," || ")},l.compileAnd=function(t,r){return this._binOpEmitter(t,r," && ")},l.compileAdd=function(t,r){return this._binOpEmitter(t,r," + ")},l.compileConcat=function(t,r){return this._binOpEmitter(t,r,' + "" + ')},l.compileSub=function(t,r){return this._binOpEmitter(t,r," - ")},l.compileMul=function(t,r){return this._binOpEmitter(t,r," * ")},l.compileDiv=function(t,r){return this._binOpEmitter(t,r," / ")},l.compileMod=function(t,r){return this._binOpEmitter(t,r," % ")},l.compileNot=function(t,r){this._emit("!"),this.compile(t.target,r)},l.compileFloorDiv=function(t,r){this._emit("Math.floor("),this.compile(t.left,r),this._emit(" / "),this.compile(t.right,r),this._emit(")")},l.compilePow=function(t,r){this._emit("Math.pow("),this.compile(t.left,r),this._emit(", "),this.compile(t.right,r),this._emit(")")},l.compileNeg=function(t,r){this._emit("-"),this.compile(t.target,r)},l.compilePos=function(t,r){this._emit("+"),this.compile(t.target,r)},l.compileCompare=function(t,r){var a=this;this.compile(t.expr,r),t.ops.forEach(function(o){a._emit(" "+e[o.type]+" "),a.compile(o.expr,r)})},l.compileLookupVal=function(t,r){this._emit("runtime.memberLookup(("),this._compileExpression(t.target,r),this._emit("),"),this._compileExpression(t.val,r),this._emit(")")},l._getNodeName=function(t){switch(t.typename){case"Symbol":return t.value;case"FunCall":return"the return value of ("+this._getNodeName(t.name)+")";case"LookupVal":return this._getNodeName(t.target)+'["'+this._getNodeName(t.val)+'"]';case"Literal":return t.value.toString();default:return"--expression--"}},l.compileFunCall=function(t,r){this._emit("(lineno = "+t.lineno+", colno = "+t.colno+", "),this._emit("runtime.callWrap("),this._compileExpression(t.name,r),this._emit(', "'+this._getNodeName(t.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(t.args,r,"[","])"),this._emit(")")},l.compileFilter=function(t,r){var a=t.name;this.assertType(a,y.Symbol),this._emit('env.getFilter("'+a.value+'").call(context, '),this._compileAggregate(t.args,r),this._emit(")")},l.compileFilterAsync=function(t,r){var a=t.name,o=t.symbol.value;this.assertType(a,y.Symbol),r.set(o,o),this._emit('env.getFilter("'+a.value+'").call(context, '),this._compileAggregate(t.args,r),this._emitLine(", "+this._makeCallback(o)),this._addScopeLevel()},l.compileKeywordArgs=function(t,r){this._emit("runtime.makeKeywordArgs("),this.compileDict(t,r),this._emit(")")},l.compileSet=function(t,r){var a=this,o=[];t.targets.forEach(function(s){var c=s.value,u=r.lookup(c);u==null&&(u=a._tmpid(),a._emitLine("var "+u+";")),o.push(u)}),t.value?(this._emit(o.join(" = ")+" = "),this._compileExpression(t.value,r),this._emitLine(";")):(this._emit(o.join(" = ")+" = "),this.compile(t.body,r),this._emitLine(";")),t.targets.forEach(function(s,c){var u=o[c],w=s.value;a._emitLine('frame.set("'+w+'", '+u+", true);"),a._emitLine("if(frame.topLevel) {"),a._emitLine('context.setVariable("'+w+'", '+u+");"),a._emitLine("}"),w.charAt(0)!=="_"&&(a._emitLine("if(frame.topLevel) {"),a._emitLine('context.addExport("'+w+'", '+u+");"),a._emitLine("}"))})},l.compileSwitch=function(t,r){var a=this;this._emit("switch ("),this.compile(t.expr,r),this._emit(") {"),t.cases.forEach(function(o,s){a._emit("case "),a.compile(o.cond,r),a._emit(": "),a.compile(o.body,r),o.body.children.length&&a._emitLine("break;")}),t.default&&(this._emit("default:"),this.compile(t.default,r)),this._emit("}")},l.compileIf=function(t,r,a){var o=this;this._emit("if("),this._compileExpression(t.cond,r),this._emitLine(") {"),this._withScopedSyntax(function(){o.compile(t.body,r),a&&o._emit("cb()")}),t.else_?(this._emitLine(`}
else {`),this._withScopedSyntax(function(){o.compile(t.else_,r),a&&o._emit("cb()")})):a&&(this._emitLine(`}
else {`),this._emit("cb()")),this._emitLine("}")},l.compileIfAsync=function(t,r){this._emit("(function(cb) {"),this.compileIf(t,r,!0),this._emit("})("+this._makeCallback()),this._addScopeLevel()},l._emitLoopBindings=function(t,r,a,o){var s=this,c=[{name:"index",val:a+" + 1"},{name:"index0",val:a},{name:"revindex",val:o+" - "+a},{name:"revindex0",val:o+" - "+a+" - 1"},{name:"first",val:a+" === 0"},{name:"last",val:a+" === "+o+" - 1"},{name:"length",val:o}];c.forEach(function(u){s._emitLine('frame.set("loop.'+u.name+'", '+u.val+");")})},l.compileFor=function(t,r){var a=this,o=this._tmpid(),s=this._tmpid(),c=this._tmpid();if(r=r.push(),this._emitLine("frame = frame.push();"),this._emit("var "+c+" = "),this._compileExpression(t.arr,r),this._emitLine(";"),this._emit("if("+c+") {"),this._emitLine(c+" = runtime.fromIterator("+c+");"),t.name instanceof y.Array){this._emitLine("var "+o+";"),this._emitLine("if(runtime.isArray("+c+")) {"),this._emitLine("var "+s+" = "+c+".length;"),this._emitLine("for("+o+"=0; "+o+" < "+c+".length; "+o+"++) {"),t.name.children.forEach(function(d,f){var k=a._tmpid();a._emitLine("var "+k+" = "+c+"["+o+"]["+f+"];"),a._emitLine('frame.set("'+d+'", '+c+"["+o+"]["+f+"]);"),r.set(t.name.children[f].value,k)}),this._emitLoopBindings(t,c,o,s),this._withScopedSyntax(function(){a.compile(t.body,r)}),this._emitLine("}"),this._emitLine("} else {");var u=t.name.children,w=u[0],L=u[1],b=this._tmpid(),A=this._tmpid();r.set(w.value,b),r.set(L.value,A),this._emitLine(o+" = -1;"),this._emitLine("var "+s+" = runtime.keys("+c+").length;"),this._emitLine("for(var "+b+" in "+c+") {"),this._emitLine(o+"++;"),this._emitLine("var "+A+" = "+c+"["+b+"];"),this._emitLine('frame.set("'+w.value+'", '+b+");"),this._emitLine('frame.set("'+L.value+'", '+A+");"),this._emitLoopBindings(t,c,o,s),this._withScopedSyntax(function(){a.compile(t.body,r)}),this._emitLine("}"),this._emitLine("}")}else{var R=this._tmpid();r.set(t.name.value,R),this._emitLine("var "+s+" = "+c+".length;"),this._emitLine("for(var "+o+"=0; "+o+" < "+c+".length; "+o+"++) {"),this._emitLine("var "+R+" = "+c+"["+o+"];"),this._emitLine('frame.set("'+t.name.value+'", '+R+");"),this._emitLoopBindings(t,c,o,s),this._withScopedSyntax(function(){a.compile(t.body,r)}),this._emitLine("}")}this._emitLine("}"),t.else_&&(this._emitLine("if (!"+s+") {"),this.compile(t.else_,r),this._emitLine("}")),this._emitLine("frame = frame.pop();")},l._compileAsyncLoop=function(t,r,a){var o=this,s=this._tmpid(),c=this._tmpid(),u=this._tmpid(),w=a?"asyncAll":"asyncEach";if(r=r.push(),this._emitLine("frame = frame.push();"),this._emit("var "+u+" = runtime.fromIterator("),this._compileExpression(t.arr,r),this._emitLine(");"),t.name instanceof y.Array){var L=t.name.children.length;this._emit("runtime."+w+"("+u+", "+L+", function("),t.name.children.forEach(function(R){o._emit(R.value+",")}),this._emit(s+","+c+",next) {"),t.name.children.forEach(function(R){var d=R.value;r.set(d,d),o._emitLine('frame.set("'+d+'", '+d+");")})}else{var b=t.name.value;this._emitLine("runtime."+w+"("+u+", 1, function("+b+", "+s+", "+c+",next) {"),this._emitLine('frame.set("'+b+'", '+b+");"),r.set(b,b)}this._emitLoopBindings(t,u,s,c),this._withScopedSyntax(function(){var R;a&&(R=o._pushBuffer()),o.compile(t.body,r),o._emitLine("next("+s+(R?","+R:"")+");"),a&&o._popBuffer()});var A=this._tmpid();this._emitLine("}, "+this._makeCallback(A)),this._addScopeLevel(),a&&this._emitLine(this.buffer+" += "+A+";"),t.else_&&(this._emitLine("if (!"+u+".length) {"),this.compile(t.else_,r),this._emitLine("}")),this._emitLine("frame = frame.pop();")},l.compileAsyncEach=function(t,r){this._compileAsyncLoop(t,r)},l.compileAsyncAll=function(t,r){this._compileAsyncLoop(t,r,!0)},l._compileMacro=function(t,r){var a=this,o=[],s=null,c="macro_"+this._tmpid(),u=r!==void 0;t.args.children.forEach(function(d,f){f===t.args.children.length-1&&d instanceof y.Dict?s=d:(a.assertType(d,y.Symbol),o.push(d))});var w=[].concat(o.map(function(d){return"l_"+d.value}),["kwargs"]),L=o.map(function(d){return'"'+d.value+'"'}),b=(s&&s.children||[]).map(function(d){return'"'+d.key.value+'"'}),A;u?A=r.push(!0):A=new N,this._emitLines("var "+c+" = runtime.makeMacro(","["+L.join(", ")+"], ","["+b.join(", ")+"], ","function ("+w.join(", ")+") {","var callerFrame = frame;","frame = "+(u?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {','frame.set("caller", kwargs.caller); }'),o.forEach(function(d){a._emitLine('frame.set("'+d.value+'", l_'+d.value+");"),A.set(d.value,"l_"+d.value)}),s&&s.children.forEach(function(d){var f=d.key.value;a._emit('frame.set("'+f+'", '),a._emit('Object.prototype.hasOwnProperty.call(kwargs, "'+f+'")'),a._emit(' ? kwargs["'+f+'"] : '),a._compileExpression(d.value,A),a._emit(");")});var R=this._pushBuffer();return this._withScopedSyntax(function(){a.compile(t.body,A)}),this._emitLine("frame = "+(u?"frame.pop();":"callerFrame;")),this._emitLine("return new runtime.SafeString("+R+");"),this._emitLine("});"),this._popBuffer(),c},l.compileMacro=function(t,r){var a=this._compileMacro(t),o=t.name.value;r.set(o,a),r.parent?this._emitLine('frame.set("'+o+'", '+a+");"):(t.name.value.charAt(0)!=="_"&&this._emitLine('context.addExport("'+o+'");'),this._emitLine('context.setVariable("'+o+'", '+a+");"))},l.compileCaller=function(t,r){this._emit("(function (){");var a=this._compileMacro(t,r);this._emit("return "+a+";})()")},l._compileGetTemplate=function(t,r,a,o){var s=this._tmpid(),c=this._templateName(),u=this._makeCallback(s),w=a?"true":"false",L=o?"true":"false";return this._emit("env.getTemplate("),this._compileExpression(t.template,r),this._emitLine(", "+w+", "+c+", "+L+", "+u),s},l.compileImport=function(t,r){var a=t.target.value,o=this._compileGetTemplate(t,r,!1,!1);this._addScopeLevel(),this._emitLine(o+".getExported("+(t.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(o)),this._addScopeLevel(),r.set(a,o),r.parent?this._emitLine('frame.set("'+a+'", '+o+");"):this._emitLine('context.setVariable("'+a+'", '+o+");")},l.compileFromImport=function(t,r){var a=this,o=this._compileGetTemplate(t,r,!1,!1);this._addScopeLevel(),this._emitLine(o+".getExported("+(t.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(o)),this._addScopeLevel(),t.names.children.forEach(function(s){var c,u,w=a._tmpid();s instanceof y.Pair?(c=s.key.value,u=s.value.value):(c=s.value,u=c),a._emitLine("if(Object.prototype.hasOwnProperty.call("+o+', "'+c+'")) {'),a._emitLine("var "+w+" = "+o+"."+c+";"),a._emitLine("} else {"),a._emitLine(`cb(new Error("cannot import '`+c+`'")); return;`),a._emitLine("}"),r.set(u,w),r.parent?a._emitLine('frame.set("'+u+'", '+w+");"):a._emitLine('context.setVariable("'+u+'", '+w+");")})},l.compileBlock=function(t){var r=this._tmpid();this.inBlock||this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this._emit('context.getBlock("'+t.name.value+'")'),this.inBlock||this._emit(")"),this._emitLine("(env, context, frame, runtime, "+this._makeCallback(r)),this._emitLine(this.buffer+" += "+r+";"),this._addScopeLevel()},l.compileSuper=function(t,r){var a=t.blockName.value,o=t.symbol.value,s=this._makeCallback(o);this._emitLine('context.getSuper(env, "'+a+'", b_'+a+", frame, runtime, "+s),this._emitLine(o+" = runtime.markSafe("+o+");"),this._addScopeLevel(),r.set(o,o)},l.compileExtends=function(t,r){var a=this._tmpid(),o=this._compileGetTemplate(t,r,!0,!1);this._emitLine("parentTemplate = "+o),this._emitLine("for(var "+a+" in parentTemplate.blocks) {"),this._emitLine("context.addBlock("+a+", parentTemplate.blocks["+a+"]);"),this._emitLine("}"),this._addScopeLevel()},l.compileInclude=function(t,r){this._emitLine("var tasks = [];"),this._emitLine("tasks.push("),this._emitLine("function(callback) {");var a=this._compileGetTemplate(t,r,!1,t.ignoreMissing);this._emitLine("callback(null,"+a+");});"),this._emitLine("});");var o=this._tmpid();this._emitLine("tasks.push("),this._emitLine("function(template, callback){"),this._emitLine("template.render(context.getVariables(), frame, "+this._makeCallback(o)),this._emitLine("callback(null,"+o+");});"),this._emitLine("});"),this._emitLine("tasks.push("),this._emitLine("function(result, callback){"),this._emitLine(this.buffer+" += result;"),this._emitLine("callback(null);"),this._emitLine("});"),this._emitLine("env.waterfall(tasks, function(){"),this._addScopeLevel()},l.compileTemplateData=function(t,r){this.compileLiteral(t,r)},l.compileCapture=function(t,r){var a=this,o=this.buffer;this.buffer="output",this._emitLine("(function() {"),this._emitLine('var output = "";'),this._withScopedSyntax(function(){a.compile(t.body,r)}),this._emitLine("return output;"),this._emitLine("})()"),this.buffer=o},l.compileOutput=function(t,r){var a=this,o=t.children;o.forEach(function(s){s instanceof y.TemplateData?s.value&&(a._emit(a.buffer+" += "),a.compileLiteral(s,r),a._emitLine(";")):(a._emit(a.buffer+" += runtime.suppressValue("),a.throwOnUndefined&&a._emit("runtime.ensureDefined("),a.compile(s,r),a.throwOnUndefined&&a._emit(","+t.lineno+","+t.colno+")"),a._emit(`, env.opts.autoescape);
`))})},l.compileRoot=function(t,r){var a=this;r&&this.fail("compileRoot: root node can't have frame"),r=new N,this._emitFuncBegin(t,"root"),this._emitLine("var parentTemplate = null;"),this._compileChildren(t,r),this._emitLine("if(parentTemplate) {"),this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this._emitLine("} else {"),this._emitLine("cb(null, "+this.buffer+");"),this._emitLine("}"),this._emitFuncEnd(!0),this.inBlock=!0;var o=[],s=t.findAll(y.Block);s.forEach(function(c,u){var w=c.name.value;if(o.indexOf(w)!==-1)throw new Error('Block "'+w+'" defined more than once.');o.push(w),a._emitFuncBegin(c,"b_"+w);var L=new N;a._emitLine("var frame = frame.push(true);"),a.compile(c.body,L),a._emitFuncEnd()}),this._emitLine("return {"),s.forEach(function(c,u){var w="b_"+c.name.value;a._emitLine(w+": "+w+",")}),this._emitLine(`root: root
};`)},l.compile=function(t,r){var a=this["compile"+t.typename];a?a.call(this,t,r):this.fail("compile: Cannot compile node: "+t.typename,t.lineno,t.colno)},l.getCode=function(){return this.codebuf.join("")},p}(T);H.exports={compile:function(p,l,h,t,r){r===void 0&&(r={});var a=new n(t,r.throwOnUndefined),o=(h||[]).map(function(c){return c.preprocess}).filter(function(c){return!!c}),s=o.reduce(function(c,u){return u(c)},p);return a.compile(E.transform(m.parse(s,h,r),l,t)),a.getCode()},Compiler:n}},function(H,D,C){function _(O,P){O.prototype=Object.create(P.prototype),O.prototype.constructor=O,x(O,P)}function x(O,P){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(N,g){return N.__proto__=g,N},x(O,P)}var m=C(4),E=C(1),y=E.EmitterObj;H.exports=function(O){_(P,O);function P(){return O.apply(this,arguments)||this}var I=P.prototype;return I.resolve=function(g,T){return m.resolve(m.dirname(g),T)},I.isRelative=function(g){return g.indexOf("./")===0||g.indexOf("../")===0},P}(y)},function(H,D,C){function _(L,b){L.prototype=Object.create(b.prototype),L.prototype.constructor=L,x(L,b)}function x(L,b){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,d){return R.__proto__=d,R},x(L,b)}var m=C(12),E=C(15),y=C(0),O=C(5),P=C(18),I=C(10),N=I.FileSystemLoader,g=I.WebLoader,T=I.PrecompiledLoader,e=C(20),n=C(21),i=C(1),p=i.Obj,l=i.EmitterObj,h=C(2),t=h.handleError,r=h.Frame,a=C(22);function o(L,b,A){m(function(){L(b,A)})}var s={type:"code",obj:{root:function(b,A,R,d,f){try{f(null,"")}catch(k){f(t(k,null,null))}}}},c=function(L){_(b,L);function b(){return L.apply(this,arguments)||this}var A=b.prototype;return A.init=function(d,f){var k=this;f=this.opts=f||{},this.opts.dev=!!f.dev,this.opts.autoescape=f.autoescape!=null?f.autoescape:!0,this.opts.throwOnUndefined=!!f.throwOnUndefined,this.opts.trimBlocks=!!f.trimBlocks,this.opts.lstripBlocks=!!f.lstripBlocks,this.loaders=[],d?this.loaders=y.isArray(d)?d:[d]:N?this.loaders=[new N("views")]:g&&(this.loaders=[new g("/views")]),typeof window<"u"&&window.nunjucksPrecompiled&&this.loaders.unshift(new T(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=n(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],y._entries(P).forEach(function(F){var B=F[0],U=F[1];return k.addFilter(B,U)}),y._entries(e).forEach(function(F){var B=F[0],U=F[1];return k.addTest(B,U)})},A._initLoaders=function(){var d=this;this.loaders.forEach(function(f){f.cache={},typeof f.on=="function"&&(f.on("update",function(k,F){f.cache[k]=null,d.emit("update",k,F,f)}),f.on("load",function(k,F){d.emit("load",k,F,f)}))})},A.invalidateCache=function(){this.loaders.forEach(function(d){d.cache={}})},A.addExtension=function(d,f){return f.__name=d,this.extensions[d]=f,this.extensionsList.push(f),this},A.removeExtension=function(d){var f=this.getExtension(d);f&&(this.extensionsList=y.without(this.extensionsList,f),delete this.extensions[d])},A.getExtension=function(d){return this.extensions[d]},A.hasExtension=function(d){return!!this.extensions[d]},A.addGlobal=function(d,f){return this.globals[d]=f,this},A.getGlobal=function(d){if(typeof this.globals[d]>"u")throw new Error("global not found: "+d);return this.globals[d]},A.addFilter=function(d,f,k){var F=f;return k&&this.asyncFilters.push(d),this.filters[d]=F,this},A.getFilter=function(d){if(!this.filters[d])throw new Error("filter not found: "+d);return this.filters[d]},A.addTest=function(d,f){return this.tests[d]=f,this},A.getTest=function(d){if(!this.tests[d])throw new Error("test not found: "+d);return this.tests[d]},A.resolveTemplate=function(d,f,k){var F=d.isRelative&&f?d.isRelative(k):!1;return F&&d.resolve?d.resolve(f,k):k},A.getTemplate=function(d,f,k,F,B){var U=this,Z=this,z=null;if(d&&d.raw&&(d=d.raw),y.isFunction(k)&&(B=k,k=null,f=f||!1),y.isFunction(f)&&(B=f,f=!1),d instanceof w)z=d;else{if(typeof d!="string")throw new Error("template names must be a string: "+d);for(var se=0;se<this.loaders.length;se++){var ue=this.loaders[se];if(z=ue.cache[this.resolveTemplate(ue,k,d)],z)break}}if(z)if(f&&z.compile(),B){B(null,z);return}else return z;var X,q=function(G,V){if(!V&&!G&&!F&&(G=new Error("template not found: "+d)),G)if(B){B(G);return}else throw G;var te;V?(te=new w(V.src,U,V.path,f),V.noCache||(V.loader.cache[d]=te)):te=new w(s,U,"",f),B?B(null,te):X=te};return y.asyncIter(this.loaders,function(j,G,V,te){function ce(le,me){le?te(le):me?(me.loader=j,te(null,me)):V()}d=Z.resolveTemplate(j,k,d),j.async?j.getSource(d,ce):ce(null,j.getSource(d))},q),X},A.express=function(d){return a(this,d)},A.render=function(d,f,k){y.isFunction(f)&&(k=f,f=null);var F=null;return this.getTemplate(d,function(B,U){if(B&&k)o(k,B);else{if(B)throw B;F=U.render(f,k)}}),F},A.renderString=function(d,f,k,F){y.isFunction(k)&&(F=k,k={}),k=k||{};var B=new w(d,this,k.path);return B.render(f,F)},A.waterfall=function(d,f,k){return E(d,f,k)},b}(l),u=function(L){_(b,L);function b(){return L.apply(this,arguments)||this}var A=b.prototype;return A.init=function(d,f,k){var F=this;this.env=k||new c,this.ctx=y.extend({},d),this.blocks={},this.exported=[],y.keys(f).forEach(function(B){F.addBlock(B,f[B])})},A.lookup=function(d){return d in this.env.globals&&!(d in this.ctx)?this.env.globals[d]:this.ctx[d]},A.setVariable=function(d,f){this.ctx[d]=f},A.getVariables=function(){return this.ctx},A.addBlock=function(d,f){return this.blocks[d]=this.blocks[d]||[],this.blocks[d].push(f),this},A.getBlock=function(d){if(!this.blocks[d])throw new Error('unknown block "'+d+'"');return this.blocks[d][0]},A.getSuper=function(d,f,k,F,B,U){var Z=y.indexOf(this.blocks[f]||[],k),z=this.blocks[f][Z+1],se=this;if(Z===-1||!z)throw new Error('no super block available for "'+f+'"');z(d,se,F,B,U)},A.addExport=function(d){this.exported.push(d)},A.getExported=function(){var d=this,f={};return this.exported.forEach(function(k){f[k]=d.ctx[k]}),f},b}(p),w=function(L){_(b,L);function b(){return L.apply(this,arguments)||this}var A=b.prototype;return A.init=function(d,f,k,F){if(this.env=f||new c,y.isObject(d))switch(d.type){case"code":this.tmplProps=d.obj;break;case"string":this.tmplStr=d.obj;break;default:throw new Error("Unexpected template object type "+d.type+"; expected 'code', or 'string'")}else if(y.isString(d))this.tmplStr=d;else throw new Error("src must be a string or an object describing the source");if(this.path=k,F)try{this._compile()}catch(B){throw y._prettifyError(this.path,this.env.opts.dev,B)}else this.compiled=!1},A.render=function(d,f,k){var F=this;typeof d=="function"?(k=d,d={}):typeof f=="function"&&(k=f,f=null);var B=!f;try{this.compile()}catch(X){var U=y._prettifyError(this.path,this.env.opts.dev,X);if(k)return o(k,U);throw U}var Z=new u(d||{},this.blocks,this.env),z=f?f.push(!0):new r;z.topLevel=!0;var se=null,ue=!1;return this.rootRenderFunc(this.env,Z,z,h,function(X,q){if(!(ue&&k&&typeof q<"u"))if(X&&(X=y._prettifyError(F.path,F.env.opts.dev,X),ue=!0),k)B?o(k,X,q):k(X,q);else{if(X)throw X;se=q}}),se},A.getExported=function(d,f,k){typeof d=="function"&&(k=d,d={}),typeof f=="function"&&(k=f,f=null);try{this.compile()}catch(U){if(k)return k(U);throw U}var F=f?f.push():new r;F.topLevel=!0;var B=new u(d||{},this.blocks,this.env);this.rootRenderFunc(this.env,B,F,h,function(U){U?k(U,null):k(null,B.getExported())})},A.compile=function(){this.compiled||this._compile()},A._compile=function(){var d;if(this.tmplProps)d=this.tmplProps;else{var f=O.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),k=new Function(f);d=k()}this.blocks=this._getBlocks(d),this.rootRenderFunc=d.root,this.compiled=!0},A._getBlocks=function(d){var f={};return y.keys(d).forEach(function(k){k.slice(0,2)==="b_"&&(f[k.slice(2)]=d[k])}),f},b}(p);H.exports={Environment:c,Template:w}},function(H,D,C){function _(I,N){I.prototype=Object.create(N.prototype),I.prototype.constructor=I,x(I,N)}function x(I,N){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,e){return T.__proto__=e,T},x(I,N)}var m=C(9),E=C(3),y=C(1).Obj,O=C(0),P=function(I){_(N,I);function N(){return I.apply(this,arguments)||this}var g=N.prototype;return g.init=function(e){this.tokens=e,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},g.nextToken=function(e){var n;if(this.peeked)if(!e&&this.peeked.type===m.TOKEN_WHITESPACE)this.peeked=null;else return n=this.peeked,this.peeked=null,n;if(n=this.tokens.nextToken(),!e)for(;n&&n.type===m.TOKEN_WHITESPACE;)n=this.tokens.nextToken();return n},g.peekToken=function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},g.pushToken=function(e){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=e},g.error=function(e,n,i){if(n===void 0||i===void 0){var p=this.peekToken()||{};n=p.lineno,i=p.colno}return n!==void 0&&(n+=1),i!==void 0&&(i+=1),new O.TemplateError(e,n,i)},g.fail=function(e,n,i){throw this.error(e,n,i)},g.skip=function(e){var n=this.nextToken();return!n||n.type!==e?(this.pushToken(n),!1):!0},g.expect=function(e){var n=this.nextToken();return n.type!==e&&this.fail("expected "+e+", got "+n.type,n.lineno,n.colno),n},g.skipValue=function(e,n){var i=this.nextToken();return!i||i.type!==e||i.value!==n?(this.pushToken(i),!1):!0},g.skipSymbol=function(e){return this.skipValue(m.TOKEN_SYMBOL,e)},g.advanceAfterBlockEnd=function(e){var n;return e||(n=this.peekToken(),n||this.fail("unexpected end of file"),n.type!==m.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),e=this.nextToken().value),n=this.nextToken(),n&&n.type===m.TOKEN_BLOCK_END?n.value.charAt(0)==="-"&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+e+" statement"),n},g.advanceAfterVariableEnd=function(){var e=this.nextToken();e&&e.type===m.TOKEN_VARIABLE_END?this.dropLeadingWhitespace=e.value.charAt(e.value.length-this.tokens.tags.VARIABLE_END.length-1)==="-":(this.pushToken(e),this.fail("expected variable end"))},g.parseFor=function(){var e=this.peekToken(),n,i;this.skipSymbol("for")?(n=new E.For(e.lineno,e.colno),i="endfor"):this.skipSymbol("asyncEach")?(n=new E.AsyncEach(e.lineno,e.colno),i="endeach"):this.skipSymbol("asyncAll")?(n=new E.AsyncAll(e.lineno,e.colno),i="endall"):this.fail("parseFor: expected for{Async}",e.lineno,e.colno),n.name=this.parsePrimary(),n.name instanceof E.Symbol||this.fail("parseFor: variable name expected for loop");var p=this.peekToken().type;if(p===m.TOKEN_COMMA){var l=n.name;for(n.name=new E.Array(l.lineno,l.colno),n.name.addChild(l);this.skip(m.TOKEN_COMMA);){var h=this.parsePrimary();n.name.addChild(h)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',e.lineno,e.colno),n.arr=this.parseExpression(),this.advanceAfterBlockEnd(e.value),n.body=this.parseUntilBlocks(i,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),n.else_=this.parseUntilBlocks(i)),this.advanceAfterBlockEnd(),n},g.parseMacro=function(){var e=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var n=this.parsePrimary(!0),i=this.parseSignature(),p=new E.Macro(e.lineno,e.colno,n,i);return this.advanceAfterBlockEnd(e.value),p.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),p},g.parseCall=function(){var e=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var n=this.parseSignature(!0)||new E.NodeList,i=this.parsePrimary();this.advanceAfterBlockEnd(e.value);var p=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var l=new E.Symbol(e.lineno,e.colno,"caller"),h=new E.Caller(e.lineno,e.colno,l,n,p),t=i.args.children;t[t.length-1]instanceof E.KeywordArgs||t.push(new E.KeywordArgs);var r=t[t.length-1];return r.addChild(new E.Pair(e.lineno,e.colno,l,h)),new E.Output(e.lineno,e.colno,[i])},g.parseWithContext=function(){var e=this.peekToken(),n=null;return this.skipSymbol("with")?n=!0:this.skipSymbol("without")&&(n=!1),n!==null&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",e.lineno,e.colno)),n},g.parseImport=function(){var e=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",e.lineno,e.colno);var n=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',e.lineno,e.colno);var i=this.parseExpression(),p=this.parseWithContext(),l=new E.Import(e.lineno,e.colno,n,i,p);return this.advanceAfterBlockEnd(e.value),l},g.parseFrom=function(){var e=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var n=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",e.lineno,e.colno);for(var i=new E.NodeList,p;;){var l=this.peekToken();if(l.type===m.TOKEN_BLOCK_END){i.children.length||this.fail("parseFrom: Expected at least one import name",e.lineno,e.colno),l.value.charAt(0)==="-"&&(this.dropLeadingWhitespace=!0),this.nextToken();break}i.children.length>0&&!this.skip(m.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",e.lineno,e.colno);var h=this.parsePrimary();if(h.value.charAt(0)==="_"&&this.fail("parseFrom: names starting with an underscore cannot be imported",h.lineno,h.colno),this.skipSymbol("as")){var t=this.parsePrimary();i.addChild(new E.Pair(h.lineno,h.colno,h,t))}else i.addChild(h);p=this.parseWithContext()}return new E.FromImport(e.lineno,e.colno,n,i,p)},g.parseBlock=function(){var e=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",e.lineno,e.colno);var n=new E.Block(e.lineno,e.colno);n.name=this.parsePrimary(),n.name instanceof E.Symbol||this.fail("parseBlock: variable name expected",e.lineno,e.colno),this.advanceAfterBlockEnd(e.value),n.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(n.name.value);var i=this.peekToken();return i||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(i.value),n},g.parseExtends=function(){var e="extends",n=this.peekToken();this.skipSymbol(e)||this.fail("parseTemplateRef: expected "+e);var i=new E.Extends(n.lineno,n.colno);return i.template=this.parseExpression(),this.advanceAfterBlockEnd(n.value),i},g.parseInclude=function(){var e="include",n=this.peekToken();this.skipSymbol(e)||this.fail("parseInclude: expected "+e);var i=new E.Include(n.lineno,n.colno);return i.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(i.ignoreMissing=!0),this.advanceAfterBlockEnd(n.value),i},g.parseIf=function(){var e=this.peekToken(),n;this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?n=new E.If(e.lineno,e.colno):this.skipSymbol("ifAsync")?n=new E.IfAsync(e.lineno,e.colno):this.fail("parseIf: expected if, elif, or elseif",e.lineno,e.colno),n.cond=this.parseExpression(),this.advanceAfterBlockEnd(e.value),n.body=this.parseUntilBlocks("elif","elseif","else","endif");var i=this.peekToken();switch(i&&i.value){case"elseif":case"elif":n.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),n.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":n.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return n},g.parseSet=function(){var e=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",e.lineno,e.colno);for(var n=new E.Set(e.lineno,e.colno,[]),i;(i=this.parsePrimary())&&(n.targets.push(i),!!this.skip(m.TOKEN_COMMA)););return this.skipValue(m.TOKEN_OPERATOR,"=")?(n.value=this.parseExpression(),this.advanceAfterBlockEnd(e.value)):this.skip(m.TOKEN_BLOCK_END)?(n.body=new E.Capture(e.lineno,e.colno,this.parseUntilBlocks("endset")),n.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",e.lineno,e.colno),n},g.parseSwitch=function(){var e="switch",n="endswitch",i="case",p="default",l=this.peekToken();!this.skipSymbol(e)&&!this.skipSymbol(i)&&!this.skipSymbol(p)&&this.fail('parseSwitch: expected "switch," "case" or "default"',l.lineno,l.colno);var h=this.parseExpression();this.advanceAfterBlockEnd(e),this.parseUntilBlocks(i,p,n);var t=this.peekToken(),r=[],a;do{this.skipSymbol(i);var o=this.parseExpression();this.advanceAfterBlockEnd(e);var s=this.parseUntilBlocks(i,p,n);r.push(new E.Case(t.line,t.col,o,s)),t=this.peekToken()}while(t&&t.value===i);switch(t.value){case p:this.advanceAfterBlockEnd(),a=this.parseUntilBlocks(n),this.advanceAfterBlockEnd();break;case n:this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.')}return new E.Switch(l.lineno,l.colno,h,r,a)},g.parseStatement=function(){var e=this.peekToken(),n;if(e.type!==m.TOKEN_SYMBOL&&this.fail("tag name expected",e.lineno,e.colno),this.breakOnBlocks&&O.indexOf(this.breakOnBlocks,e.value)!==-1)return null;switch(e.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();case"switch":return this.parseSwitch();default:if(this.extensions.length)for(var i=0;i<this.extensions.length;i++){var p=this.extensions[i];if(O.indexOf(p.tags||[],e.value)!==-1)return p.parse(this,E,m)}this.fail("unknown block tag: "+e.value,e.lineno,e.colno)}return n},g.parseRaw=function(e){e=e||"raw";for(var n="end"+e,i=new RegExp("([\\s\\S]*?){%\\s*("+e+"|"+n+")\\s*(?=%})%}"),p=1,l="",h=null,t=this.advanceAfterBlockEnd();(h=this.tokens._extractRegex(i))&&p>0;){var r=h[0],a=h[1],o=h[2];o===e?p+=1:o===n&&(p-=1),p===0?(l+=a,this.tokens.backN(r.length-a.length)):l+=r}return new E.Output(t.lineno,t.colno,[new E.TemplateData(t.lineno,t.colno,l)])},g.parsePostfix=function(e){for(var n,i=this.peekToken();i;){if(i.type===m.TOKEN_LEFT_PAREN)e=new E.FunCall(i.lineno,i.colno,e,this.parseSignature());else if(i.type===m.TOKEN_LEFT_BRACKET)n=this.parseAggregate(),n.children.length>1&&this.fail("invalid index"),e=new E.LookupVal(i.lineno,i.colno,e,n.children[0]);else if(i.type===m.TOKEN_OPERATOR&&i.value==="."){this.nextToken();var p=this.nextToken();p.type!==m.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+p.value,p.lineno,p.colno),n=new E.Literal(p.lineno,p.colno,p.value),e=new E.LookupVal(i.lineno,i.colno,e,n)}else break;i=this.peekToken()}return e},g.parseExpression=function(){var e=this.parseInlineIf();return e},g.parseInlineIf=function(){var e=this.parseOr();if(this.skipSymbol("if")){var n=this.parseOr(),i=e;e=new E.InlineIf(e.lineno,e.colno),e.body=i,e.cond=n,this.skipSymbol("else")?e.else_=this.parseOr():e.else_=null}return e},g.parseOr=function(){for(var e=this.parseAnd();this.skipSymbol("or");){var n=this.parseAnd();e=new E.Or(e.lineno,e.colno,e,n)}return e},g.parseAnd=function(){for(var e=this.parseNot();this.skipSymbol("and");){var n=this.parseNot();e=new E.And(e.lineno,e.colno,e,n)}return e},g.parseNot=function(){var e=this.peekToken();return this.skipSymbol("not")?new E.Not(e.lineno,e.colno,this.parseNot()):this.parseIn()},g.parseIn=function(){for(var e=this.parseIs();;){var n=this.nextToken();if(!n)break;var i=n.type===m.TOKEN_SYMBOL&&n.value==="not";if(i||this.pushToken(n),this.skipSymbol("in")){var p=this.parseIs();e=new E.In(e.lineno,e.colno,e,p),i&&(e=new E.Not(e.lineno,e.colno,e))}else{i&&this.pushToken(n);break}}return e},g.parseIs=function(){var e=this.parseCompare();if(this.skipSymbol("is")){var n=this.skipSymbol("not"),i=this.parseCompare();e=new E.Is(e.lineno,e.colno,e,i),n&&(e=new E.Not(e.lineno,e.colno,e))}return e},g.parseCompare=function(){for(var e=["==","===","!=","!==","<",">","<=",">="],n=this.parseConcat(),i=[];;){var p=this.nextToken();if(p)if(e.indexOf(p.value)!==-1)i.push(new E.CompareOperand(p.lineno,p.colno,this.parseConcat(),p.value));else{this.pushToken(p);break}else break}return i.length?new E.Compare(i[0].lineno,i[0].colno,n,i):n},g.parseConcat=function(){for(var e=this.parseAdd();this.skipValue(m.TOKEN_TILDE,"~");){var n=this.parseAdd();e=new E.Concat(e.lineno,e.colno,e,n)}return e},g.parseAdd=function(){for(var e=this.parseSub();this.skipValue(m.TOKEN_OPERATOR,"+");){var n=this.parseSub();e=new E.Add(e.lineno,e.colno,e,n)}return e},g.parseSub=function(){for(var e=this.parseMul();this.skipValue(m.TOKEN_OPERATOR,"-");){var n=this.parseMul();e=new E.Sub(e.lineno,e.colno,e,n)}return e},g.parseMul=function(){for(var e=this.parseDiv();this.skipValue(m.TOKEN_OPERATOR,"*");){var n=this.parseDiv();e=new E.Mul(e.lineno,e.colno,e,n)}return e},g.parseDiv=function(){for(var e=this.parseFloorDiv();this.skipValue(m.TOKEN_OPERATOR,"/");){var n=this.parseFloorDiv();e=new E.Div(e.lineno,e.colno,e,n)}return e},g.parseFloorDiv=function(){for(var e=this.parseMod();this.skipValue(m.TOKEN_OPERATOR,"//");){var n=this.parseMod();e=new E.FloorDiv(e.lineno,e.colno,e,n)}return e},g.parseMod=function(){for(var e=this.parsePow();this.skipValue(m.TOKEN_OPERATOR,"%");){var n=this.parsePow();e=new E.Mod(e.lineno,e.colno,e,n)}return e},g.parsePow=function(){for(var e=this.parseUnary();this.skipValue(m.TOKEN_OPERATOR,"**");){var n=this.parseUnary();e=new E.Pow(e.lineno,e.colno,e,n)}return e},g.parseUnary=function(e){var n=this.peekToken(),i;return this.skipValue(m.TOKEN_OPERATOR,"-")?i=new E.Neg(n.lineno,n.colno,this.parseUnary(!0)):this.skipValue(m.TOKEN_OPERATOR,"+")?i=new E.Pos(n.lineno,n.colno,this.parseUnary(!0)):i=this.parsePrimary(),e||(i=this.parseFilter(i)),i},g.parsePrimary=function(e){var n=this.nextToken(),i,p=null;if(n?n.type===m.TOKEN_STRING?i=n.value:n.type===m.TOKEN_INT?i=parseInt(n.value,10):n.type===m.TOKEN_FLOAT?i=parseFloat(n.value):n.type===m.TOKEN_BOOLEAN?n.value==="true"?i=!0:n.value==="false"?i=!1:this.fail("invalid boolean: "+n.value,n.lineno,n.colno):n.type===m.TOKEN_NONE?i=null:n.type===m.TOKEN_REGEX&&(i=new RegExp(n.value.body,n.value.flags)):this.fail("expected expression, got end of file"),i!==void 0?p=new E.Literal(n.lineno,n.colno,i):n.type===m.TOKEN_SYMBOL?p=new E.Symbol(n.lineno,n.colno,n.value):(this.pushToken(n),p=this.parseAggregate()),e||(p=this.parsePostfix(p)),p)return p;throw this.error("unexpected token: "+n.value,n.lineno,n.colno)},g.parseFilterName=function(){for(var e=this.expect(m.TOKEN_SYMBOL),n=e.value;this.skipValue(m.TOKEN_OPERATOR,".");)n+="."+this.expect(m.TOKEN_SYMBOL).value;return new E.Symbol(e.lineno,e.colno,n)},g.parseFilterArgs=function(e){if(this.peekToken().type===m.TOKEN_LEFT_PAREN){var n=this.parsePostfix(e);return n.args.children}return[]},g.parseFilter=function(e){for(;this.skip(m.TOKEN_PIPE);){var n=this.parseFilterName();e=new E.Filter(n.lineno,n.colno,n,new E.NodeList(n.lineno,n.colno,[e].concat(this.parseFilterArgs(e))))}return e},g.parseFilterStatement=function(){var e=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var n=this.parseFilterName(),i=this.parseFilterArgs(n);this.advanceAfterBlockEnd(e.value);var p=new E.Capture(n.lineno,n.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var l=new E.Filter(n.lineno,n.colno,n,new E.NodeList(n.lineno,n.colno,[p].concat(i)));return new E.Output(n.lineno,n.colno,[l])},g.parseAggregate=function(){var e=this.nextToken(),n;switch(e.type){case m.TOKEN_LEFT_PAREN:n=new E.Group(e.lineno,e.colno);break;case m.TOKEN_LEFT_BRACKET:n=new E.Array(e.lineno,e.colno);break;case m.TOKEN_LEFT_CURLY:n=new E.Dict(e.lineno,e.colno);break;default:return null}for(;;){var i=this.peekToken().type;if(i===m.TOKEN_RIGHT_PAREN||i===m.TOKEN_RIGHT_BRACKET||i===m.TOKEN_RIGHT_CURLY){this.nextToken();break}if(n.children.length>0&&(this.skip(m.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",e.lineno,e.colno)),n instanceof E.Dict){var p=this.parsePrimary();this.skip(m.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",e.lineno,e.colno);var l=this.parseExpression();n.addChild(new E.Pair(p.lineno,p.colno,p,l))}else{var h=this.parseExpression();n.addChild(h)}}return n},g.parseSignature=function(e,n){var i=this.peekToken();if(!n&&i.type!==m.TOKEN_LEFT_PAREN){if(e)return null;this.fail("expected arguments",i.lineno,i.colno)}i.type===m.TOKEN_LEFT_PAREN&&(i=this.nextToken());for(var p=new E.NodeList(i.lineno,i.colno),l=new E.KeywordArgs(i.lineno,i.colno),h=!1;;){if(i=this.peekToken(),!n&&i.type===m.TOKEN_RIGHT_PAREN){this.nextToken();break}else if(n&&i.type===m.TOKEN_BLOCK_END)break;if(h&&!this.skip(m.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",i.lineno,i.colno);else{var t=this.parseExpression();this.skipValue(m.TOKEN_OPERATOR,"=")?l.addChild(new E.Pair(t.lineno,t.colno,t,this.parseExpression())):p.addChild(t)}h=!0}return l.children.length&&p.addChild(l),p},g.parseUntilBlocks=function(){for(var e=this.breakOnBlocks,n=arguments.length,i=new Array(n),p=0;p<n;p++)i[p]=arguments[p];this.breakOnBlocks=i;var l=this.parse();return this.breakOnBlocks=e,l},g.parseNodes=function(){for(var e,n=[];e=this.nextToken();)if(e.type===m.TOKEN_DATA){var i=e.value,p=this.peekToken(),l=p&&p.value;this.dropLeadingWhitespace&&(i=i.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),p&&(p.type===m.TOKEN_BLOCK_START&&l.charAt(l.length-1)==="-"||p.type===m.TOKEN_VARIABLE_START&&l.charAt(this.tokens.tags.VARIABLE_START.length)==="-"||p.type===m.TOKEN_COMMENT&&l.charAt(this.tokens.tags.COMMENT_START.length)==="-")&&(i=i.replace(/\s*$/,"")),n.push(new E.Output(e.lineno,e.colno,[new E.TemplateData(e.lineno,e.colno,i)]))}else if(e.type===m.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var h=this.parseStatement();if(!h)break;n.push(h)}else if(e.type===m.TOKEN_VARIABLE_START){var t=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),n.push(new E.Output(e.lineno,e.colno,[t]))}else e.type===m.TOKEN_COMMENT?this.dropLeadingWhitespace=e.value.charAt(e.value.length-this.tokens.tags.COMMENT_END.length-1)==="-":this.fail("Unexpected token at top-level: "+e.type,e.lineno,e.colno);return n},g.parse=function(){return new E.NodeList(0,0,this.parseNodes())},g.parseAsRoot=function(){return new E.Root(0,0,this.parseNodes())},N}(y);H.exports={parse:function(N,g,T){var e=new P(m.lex(N,T));return g!==void 0&&(e.extensions=g),e.parseAsRoot()},Parser:P}},function(H,D,C){var _=C(0),x=` 
	\r`,m="()[]{}%*-+~/#,:|.<>=!",E="0123456789",y="{%",O="%}",P="{{",I="}}",N="{#",g="#}",T="string",e="whitespace",n="data",i="block-start",p="block-end",l="variable-start",h="variable-end",t="comment",r="left-paren",a="right-paren",o="left-bracket",s="right-bracket",c="left-curly",u="right-curly",w="operator",L="comma",b="colon",A="tilde",R="pipe",d="int",f="float",k="boolean",F="none",B="symbol",U="special",Z="regex";function z(ue,X,q,j){return{type:ue,value:X,lineno:q,colno:j}}var se=function(){function ue(q,j){this.str=q,this.index=0,this.len=q.length,this.lineno=0,this.colno=0,this.in_code=!1,j=j||{};var G=j.tags||{};this.tags={BLOCK_START:G.blockStart||y,BLOCK_END:G.blockEnd||O,VARIABLE_START:G.variableStart||P,VARIABLE_END:G.variableEnd||I,COMMENT_START:G.commentStart||N,COMMENT_END:G.commentEnd||g},this.trimBlocks=!!j.trimBlocks,this.lstripBlocks=!!j.lstripBlocks}var X=ue.prototype;return X.nextToken=function(){var j=this.lineno,G=this.colno,V;if(this.in_code){var te=this.current();if(this.isFinished())return null;if(te==='"'||te==="'")return z(T,this._parseString(te),j,G);if(V=this._extract(x))return z(e,V,j,G);if((V=this._extractString(this.tags.BLOCK_END))||(V=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&(te=this.current(),te===`
`?this.forward():te==="\r"&&(this.forward(),te=this.current(),te===`
`?this.forward():this.back())),z(p,V,j,G);if((V=this._extractString(this.tags.VARIABLE_END))||(V=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,z(h,V,j,G);if(te==="r"&&this.str.charAt(this.index+1)==="/"){this.forwardN(2);for(var ce="";!this.isFinished();)if(this.current()==="/"&&this.previous()!=="\\"){this.forward();break}else ce+=this.current(),this.forward();for(var le=["g","i","m","y"],me="";!this.isFinished();){var v=le.indexOf(this.current())!==-1;if(v)me+=this.current(),this.forward();else break}return z(Z,{body:ce,flags:me},j,G)}else if(m.indexOf(te)!==-1){this.forward();var S=["==","===","!=","!==","<=",">=","//","**"],M=te+this.current(),K;switch(_.indexOf(S,M)!==-1&&(this.forward(),te=M,_.indexOf(S,M+this.current())!==-1&&(te=M+this.current(),this.forward())),te){case"(":K=r;break;case")":K=a;break;case"[":K=o;break;case"]":K=s;break;case"{":K=c;break;case"}":K=u;break;case",":K=L;break;case":":K=b;break;case"~":K=A;break;case"|":K=R;break;default:K=w}return z(K,te,j,G)}else if(V=this._extractUntil(x+m),V.match(/^[-+]?[0-9]+$/))if(this.current()==="."){this.forward();var $=this._extract(E);return z(f,V+"."+$,j,G)}else return z(d,V,j,G);else{if(V.match(/^(true|false)$/))return z(k,V,j,G);if(V==="none")return z(F,V,j,G);if(V==="null")return z(F,V,j,G);if(V)return z(B,V,j,G);throw new Error("Unexpected value while parsing: "+V)}}else{var J=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((V=this._extractString(this.tags.BLOCK_START+"-"))||(V=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,z(i,V,j,G);if((V=this._extractString(this.tags.VARIABLE_START+"-"))||(V=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,z(l,V,j,G);V="";var re,Q=!1;for(this._matches(this.tags.COMMENT_START)&&(Q=!0,V=this._extractString(this.tags.COMMENT_START));(re=this._extractUntil(J))!==null;)if(V+=re,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!Q){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=V.length){var oe=V.slice(-this.colno);if(/^\s+$/.test(oe)&&(V=V.slice(0,-this.colno),!V.length))return this.nextToken()}break}else if(this._matches(this.tags.COMMENT_END)){if(!Q)throw new Error("unexpected end of comment");V+=this._extractString(this.tags.COMMENT_END);break}else V+=this.current(),this.forward();if(re===null&&Q)throw new Error("expected end of comment, got end of file");return z(Q?t:n,V,j,G)}},X._parseString=function(j){this.forward();for(var G="";!this.isFinished()&&this.current()!==j;){var V=this.current();if(V==="\\"){switch(this.forward(),this.current()){case"n":G+=`
`;break;case"t":G+="	";break;case"r":G+="\r";break;default:G+=this.current()}this.forward()}else G+=V,this.forward()}return this.forward(),G},X._matches=function(j){if(this.index+j.length>this.len)return null;var G=this.str.slice(this.index,this.index+j.length);return G===j},X._extractString=function(j){return this._matches(j)?(this.forwardN(j.length),j):null},X._extractUntil=function(j){return this._extractMatching(!0,j||"")},X._extract=function(j){return this._extractMatching(!1,j)},X._extractMatching=function(j,G){if(this.isFinished())return null;var V=G.indexOf(this.current());if(j&&V===-1||!j&&V!==-1){var te=this.current();this.forward();for(var ce=G.indexOf(this.current());(j&&ce===-1||!j&&ce!==-1)&&!this.isFinished();)te+=this.current(),this.forward(),ce=G.indexOf(this.current());return te}return""},X._extractRegex=function(j){var G=this.currentStr().match(j);return G?(this.forwardN(G[0].length),G):null},X.isFinished=function(){return this.index>=this.len},X.forwardN=function(j){for(var G=0;G<j;G++)this.forward()},X.forward=function(){this.index++,this.previous()===`
`?(this.lineno++,this.colno=0):this.colno++},X.backN=function(j){for(var G=0;G<j;G++)this.back()},X.back=function(){if(this.index--,this.current()===`
`){this.lineno--;var j=this.src.lastIndexOf(`
`,this.index-1);j===-1?this.colno=this.index:this.colno=this.index-j}else this.colno--},X.current=function(){return this.isFinished()?"":this.str.charAt(this.index)},X.currentStr=function(){return this.isFinished()?"":this.str.substr(this.index)},X.previous=function(){return this.str.charAt(this.index-1)},ue}();H.exports={lex:function(X,q){return new se(X,q)},TOKEN_STRING:T,TOKEN_WHITESPACE:e,TOKEN_DATA:n,TOKEN_BLOCK_START:i,TOKEN_BLOCK_END:p,TOKEN_VARIABLE_START:l,TOKEN_VARIABLE_END:h,TOKEN_COMMENT:t,TOKEN_LEFT_PAREN:r,TOKEN_RIGHT_PAREN:a,TOKEN_LEFT_BRACKET:o,TOKEN_RIGHT_BRACKET:s,TOKEN_LEFT_CURLY:c,TOKEN_RIGHT_CURLY:u,TOKEN_OPERATOR:w,TOKEN_COMMA:L,TOKEN_COLON:b,TOKEN_TILDE:A,TOKEN_PIPE:R,TOKEN_INT:d,TOKEN_FLOAT:f,TOKEN_BOOLEAN:k,TOKEN_NONE:F,TOKEN_SYMBOL:B,TOKEN_SPECIAL:U,TOKEN_REGEX:Z}},function(H,D,C){function _(P,I){P.prototype=Object.create(I.prototype),P.prototype.constructor=P,x(P,I)}function x(P,I){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,T){return g.__proto__=T,g},x(P,I)}var m=C(6),E=C(19),y=E.PrecompiledLoader,O=function(P){_(I,P);function I(g,T){var e;return e=P.call(this)||this,e.baseURL=g||".",T=T||{},e.useCache=!!T.useCache,e.async=!!T.async,e}var N=I.prototype;return N.resolve=function(T,e){throw new Error("relative templates not support in the browser yet")},N.getSource=function(T,e){var n=this,i=this.useCache,p;return this.fetch(this.baseURL+"/"+T,function(l,h){if(l)if(e)e(l.content);else if(l.status===404)p=null;else throw l.content;else p={src:h,path:T,noCache:!i},n.emit("load",T,p),e&&e(null,p)}),p},N.fetch=function(T,e){if(typeof window>"u")throw new Error("WebLoader can only by used in a browser");var n=new XMLHttpRequest,i=!0;n.onreadystatechange=function(){n.readyState===4&&i&&(i=!1,n.status===0||n.status===200?e(null,n.responseText):e({status:n.status,content:n.responseText}))},T+=(T.indexOf("?")===-1?"?":"&")+"s="+new Date().getTime(),n.open("GET",T,this.async),n.send()},I}(m);H.exports={WebLoader:O,PrecompiledLoader:y}},function(H,D,C){var _=C(0),x=C(7),m=x.Environment,E=x.Template,y=C(6),O=C(10),P=C(23),I=C(5),N=C(8),g=C(9),T=C(2),e=C(3),n=C(25),i;function p(l,h){h=h||{},_.isObject(l)&&(h=l,l=null);var t;return O.FileSystemLoader?t=new O.FileSystemLoader(l,{watch:h.watch,noCache:h.noCache}):O.WebLoader&&(t=new O.WebLoader(l,{useCache:h.web&&h.web.useCache,async:h.web&&h.web.async})),i=new m(t,h),h&&h.express&&i.express(h.express),i}H.exports={Environment:m,Template:E,Loader:y,FileSystemLoader:O.FileSystemLoader,NodeResolveLoader:O.NodeResolveLoader,PrecompiledLoader:O.PrecompiledLoader,WebLoader:O.WebLoader,compiler:I,parser:N,lexer:g,runtime:T,lib:_,nodes:e,installJinjaCompat:n,configure:p,reset:function(){i=void 0},compile:function(h,t,r,a){return i||p(),new E(h,t,r,a)},render:function(h,t,r){return i||p(),i.render(h,t,r)},renderString:function(h,t,r){return i||p(),i.renderString(h,t,r)},precompile:P?P.precompile:void 0,precompileString:P?P.precompileString:void 0}},function(H,D,C){var _=C(13),x=[],m=[],E=_.makeRequestCallFromTimer(y);function y(){if(m.length)throw m.shift()}H.exports=O;function O(I){var N;x.length?N=x.pop():N=new P,N.task=I,_(N)}function P(){this.task=null}P.prototype.call=function(){try{this.task.call()}catch(I){O.onerror?O.onerror(I):(m.push(I),E())}finally{this.task=null,x[x.length]=this}}},function(H,D,C){(function(_){H.exports=x;function x(e){m.length||E(),m[m.length]=e}var m=[],E,y=0,O=1024;function P(){for(;y<m.length;){var e=y;if(y=y+1,m[e].call(),y>O){for(var n=0,i=m.length-y;n<i;n++)m[n]=m[n+y];m.length-=y,y=0}}m.length=0,y=0}var I=typeof _<"u"?_:self,N=I.MutationObserver||I.WebKitMutationObserver;typeof N=="function"?E=g(P):E=T(P),x.requestFlush=E;function g(e){var n=1,i=new N(e),p=document.createTextNode("");return i.observe(p,{characterData:!0}),function(){n=-n,p.data=n}}function T(e){return function(){var i=setTimeout(l,0),p=setInterval(l,50);function l(){clearTimeout(i),clearInterval(p),e()}}}x.makeRequestCallFromTimer=T}).call(D,C(14))},function(H,D){var C;C=function(){return this}();try{C=C||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(C=window)}H.exports=C},function(H,D,C){var _,x;(function(m){var E=function(){var N=Array.prototype.slice.call(arguments);typeof N[0]=="function"&&N[0].apply(null,N.splice(1))},y=function(N){typeof setImmediate=="function"?setImmediate(N):typeof process<"u"&&process.nextTick?process.nextTick(N):setTimeout(N,0)},O=function(N){var g=function(T){var e=function(){return N.length&&N[T].apply(null,arguments),e.next()};return e.next=function(){return T<N.length-1?g(T+1):null},e};return g(0)},P=Array.isArray||function(N){return Object.prototype.toString.call(N)==="[object Array]"},I=function(N,g,T){var e=T?y:E;if(g=g||function(){},!P(N)){var n=new Error("First argument to waterfall must be an array of functions");return g(n)}if(!N.length)return g();var i=function(p){return function(l){if(l)g.apply(null,arguments),g=function(){};else{var h=Array.prototype.slice.call(arguments,1),t=p.next();t?h.push(i(t)):h.push(g),e(function(){p.apply(null,h)})}}};i(O(N))()};_=[],x=(function(){return I}).apply(D,_),x!==void 0&&(H.exports=x)})()},function(H,D,C){var _=typeof Reflect=="object"?Reflect:null,x=_&&typeof _.apply=="function"?_.apply:function(s,c,u){return Function.prototype.apply.call(s,c,u)},m;_&&typeof _.ownKeys=="function"?m=_.ownKeys:Object.getOwnPropertySymbols?m=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:m=function(s){return Object.getOwnPropertyNames(s)};function E(o){console&&console.warn&&console.warn(o)}var y=Number.isNaN||function(s){return s!==s};function O(){O.init.call(this)}H.exports=O,H.exports.once=t,O.EventEmitter=O,O.prototype._events=void 0,O.prototype._eventsCount=0,O.prototype._maxListeners=void 0;var P=10;function I(o){if(typeof o!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}Object.defineProperty(O,"defaultMaxListeners",{enumerable:!0,get:function(){return P},set:function(o){if(typeof o!="number"||o<0||y(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");P=o}}),O.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},O.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||y(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function N(o){return o._maxListeners===void 0?O.defaultMaxListeners:o._maxListeners}O.prototype.getMaxListeners=function(){return N(this)},O.prototype.emit=function(s){for(var c=[],u=1;u<arguments.length;u++)c.push(arguments[u]);var w=s==="error",L=this._events;if(L!==void 0)w=w&&L.error===void 0;else if(!w)return!1;if(w){var b;if(c.length>0&&(b=c[0]),b instanceof Error)throw b;var A=new Error("Unhandled error."+(b?" ("+b.message+")":""));throw A.context=b,A}var R=L[s];if(R===void 0)return!1;if(typeof R=="function")x(R,this,c);else for(var d=R.length,f=p(R,d),u=0;u<d;++u)x(f[u],this,c);return!0};function g(o,s,c,u){var w,L,b;if(I(c),L=o._events,L===void 0?(L=o._events=Object.create(null),o._eventsCount=0):(L.newListener!==void 0&&(o.emit("newListener",s,c.listener?c.listener:c),L=o._events),b=L[s]),b===void 0)b=L[s]=c,++o._eventsCount;else if(typeof b=="function"?b=L[s]=u?[c,b]:[b,c]:u?b.unshift(c):b.push(c),w=N(o),w>0&&b.length>w&&!b.warned){b.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=o,A.type=s,A.count=b.length,E(A)}return o}O.prototype.addListener=function(s,c){return g(this,s,c,!1)},O.prototype.on=O.prototype.addListener,O.prototype.prependListener=function(s,c){return g(this,s,c,!0)};function T(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function e(o,s,c){var u={fired:!1,wrapFn:void 0,target:o,type:s,listener:c},w=T.bind(u);return w.listener=c,u.wrapFn=w,w}O.prototype.once=function(s,c){return I(c),this.on(s,e(this,s,c)),this},O.prototype.prependOnceListener=function(s,c){return I(c),this.prependListener(s,e(this,s,c)),this},O.prototype.removeListener=function(s,c){var u,w,L,b,A;if(I(c),w=this._events,w===void 0)return this;if(u=w[s],u===void 0)return this;if(u===c||u.listener===c)--this._eventsCount===0?this._events=Object.create(null):(delete w[s],w.removeListener&&this.emit("removeListener",s,u.listener||c));else if(typeof u!="function"){for(L=-1,b=u.length-1;b>=0;b--)if(u[b]===c||u[b].listener===c){A=u[b].listener,L=b;break}if(L<0)return this;L===0?u.shift():l(u,L),u.length===1&&(w[s]=u[0]),w.removeListener!==void 0&&this.emit("removeListener",s,A||c)}return this},O.prototype.off=O.prototype.removeListener,O.prototype.removeAllListeners=function(s){var c,u,w;if(u=this._events,u===void 0)return this;if(u.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):u[s]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete u[s]),this;if(arguments.length===0){var L=Object.keys(u),b;for(w=0;w<L.length;++w)b=L[w],b!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(c=u[s],typeof c=="function")this.removeListener(s,c);else if(c!==void 0)for(w=c.length-1;w>=0;w--)this.removeListener(s,c[w]);return this};function n(o,s,c){var u=o._events;if(u===void 0)return[];var w=u[s];return w===void 0?[]:typeof w=="function"?c?[w.listener||w]:[w]:c?h(w):p(w,w.length)}O.prototype.listeners=function(s){return n(this,s,!0)},O.prototype.rawListeners=function(s){return n(this,s,!1)},O.listenerCount=function(o,s){return typeof o.listenerCount=="function"?o.listenerCount(s):i.call(o,s)},O.prototype.listenerCount=i;function i(o){var s=this._events;if(s!==void 0){var c=s[o];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}O.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]};function p(o,s){for(var c=new Array(s),u=0;u<s;++u)c[u]=o[u];return c}function l(o,s){for(;s+1<o.length;s++)o[s]=o[s+1];o.pop()}function h(o){for(var s=new Array(o.length),c=0;c<s.length;++c)s[c]=o[c].listener||o[c];return s}function t(o,s){return new Promise(function(c,u){function w(b){o.removeListener(s,L),u(b)}function L(){typeof o.removeListener=="function"&&o.removeListener("error",w),c([].slice.call(arguments))}a(o,s,L,{once:!0}),s!=="error"&&r(o,w,{once:!0})})}function r(o,s,c){typeof o.on=="function"&&a(o,"error",s,c)}function a(o,s,c,u){if(typeof o.on=="function")u.once?o.once(s,c):o.on(s,c);else if(typeof o.addEventListener=="function")o.addEventListener(s,function w(L){u.once&&o.removeEventListener(s,w),c(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o)}},function(H,D,C){var _=C(3),x=C(0),m=0;function E(){return"hole_"+m++}function y(i,p){for(var l=null,h=0;h<i.length;h++){var t=p(i[h]);t!==i[h]&&(l||(l=i.slice()),l[h]=t)}return l||i}function O(i,p,l){if(!(i instanceof _.Node))return i;if(!l){var h=p(i);if(h&&h!==i)return h}if(i instanceof _.NodeList){var t=y(i.children,function(c){return O(c,p,l)});t!==i.children&&(i=new _[i.typename](i.lineno,i.colno,t))}else if(i instanceof _.CallExtension){var r=O(i.args,p,l),a=y(i.contentArgs,function(c){return O(c,p,l)});(r!==i.args||a!==i.contentArgs)&&(i=new _[i.typename](i.extName,i.prop,r,a))}else{var o=i.fields.map(function(c){return i[c]}),s=y(o,function(c){return O(c,p,l)});s!==o&&(i=new _[i.typename](i.lineno,i.colno),s.forEach(function(c,u){i[i.fields[u]]=c}))}return l&&p(i)||i}function P(i,p){return O(i,p,!0)}function I(i,p,l){var h=[],t=P(l?i[l]:i,function(r){var a;return r instanceof _.Block?r:((r instanceof _.Filter&&x.indexOf(p,r.name.value)!==-1||r instanceof _.CallExtensionAsync)&&(a=new _.Symbol(r.lineno,r.colno,E()),h.push(new _.FilterAsync(r.lineno,r.colno,r.name,r.args,a))),a)});return l?i[l]=t:i=t,h.length?(h.push(i),new _.NodeList(i.lineno,i.colno,h)):i}function N(i,p){return P(i,function(l){return l instanceof _.Output?I(l,p):l instanceof _.Set?I(l,p,"value"):l instanceof _.For?I(l,p,"arr"):l instanceof _.If?I(l,p,"cond"):l instanceof _.CallExtension?I(l,p,"args"):void 0})}function g(i){return O(i,function(p){if(p instanceof _.Block){var l=!1,h=E();p.body=O(p.body,function(t){if(t instanceof _.FunCall&&t.name.value==="super")return l=!0,new _.Symbol(t.lineno,t.colno,h)}),l&&p.body.children.unshift(new _.Super(0,0,p.name,new _.Symbol(0,0,h)))}})}function T(i){return P(i,function(p){if(!(!(p instanceof _.If)&&!(p instanceof _.For))){var l=!1;if(O(p,function(h){if(h instanceof _.FilterAsync||h instanceof _.IfAsync||h instanceof _.AsyncEach||h instanceof _.AsyncAll||h instanceof _.CallExtensionAsync)return l=!0,h}),l){if(p instanceof _.If)return new _.IfAsync(p.lineno,p.colno,p.cond,p.body,p.else_);if(p instanceof _.For&&!(p instanceof _.AsyncAll))return new _.AsyncEach(p.lineno,p.colno,p.arr,p.name,p.body,p.else_)}}})}function e(i,p){return T(g(N(i,p)))}function n(i,p){return e(i,p||[])}H.exports={transform:n}},function(H,m,C){var _=C(0),x=C(2),m=H.exports={};function E(v,S){return v==null||v===!1?S:v}m.abs=Math.abs;function y(v){return v!==v}function O(v,S,M){var K,$=[],J=[];for(K=0;K<v.length;K++)K%S===0&&J.length&&($.push(J),J=[]),J.push(v[K]);if(J.length){if(M)for(K=J.length;K<S;K++)J.push(M);$.push(J)}return $}m.batch=O;function P(v){v=E(v,"");var S=v.toLowerCase();return x.copySafeness(v,S.charAt(0).toUpperCase()+S.slice(1))}m.capitalize=P;function I(v,S){if(v=E(v,""),S=S||80,v.length>=S)return v;var M=S-v.length,K=_.repeat(" ",M/2-M%2),$=_.repeat(" ",M/2);return x.copySafeness(v,K+v+$)}m.center=I;function N(v,S,M){return M?v||S:v!==void 0?v:S}m.default=N;function g(v,S,M){if(!_.isObject(v))throw new _.TemplateError("dictsort filter: val must be an object");var K=[];for(var $ in v)K.push([$,v[$]]);var J;if(M===void 0||M==="key")J=0;else if(M==="value")J=1;else throw new _.TemplateError("dictsort filter: You can only sort by either key or value");return K.sort(function(re,Q){var oe=re[J],he=Q[J];return S||(_.isString(oe)&&(oe=oe.toUpperCase()),_.isString(he)&&(he=he.toUpperCase())),oe>he?1:oe===he?0:-1}),K}m.dictsort=g;function T(v,S){return JSON.stringify(v,null,S)}m.dump=T;function e(v){return v instanceof x.SafeString?v:(v=v??"",x.markSafe(_.escape(v.toString())))}m.escape=e;function n(v){return v instanceof x.SafeString?v:(v=v??"",x.markSafe(v.toString()))}m.safe=n;function i(v){return v[0]}m.first=i;function p(v){return v=v??"",x.markSafe(_.escape(v.toString()))}m.forceescape=p;function l(v,S){return _.groupBy(v,S,this.env.opts.throwOnUndefined)}m.groupby=l;function h(v,S,M){if(v=E(v,""),v==="")return"";S=S||4;var K=v.split(`
`),$=_.repeat(" ",S),J=K.map(function(re,Q){return Q===0&&!M?re:""+$+re}).join(`
`);return x.copySafeness(v,J)}m.indent=h;function t(v,S,M){return S=S||"",M&&(v=_.map(v,function(K){return K[M]})),v.join(S)}m.join=t;function r(v){return v[v.length-1]}m.last=r;function a(v){var S=E(v,"");return S!==void 0?typeof Map=="function"&&S instanceof Map||typeof Set=="function"&&S instanceof Set?S.size:_.isObject(S)&&!(S instanceof x.SafeString)?_.keys(S).length:S.length:0}m.length=a;function o(v){if(_.isString(v))return v.split("");if(_.isObject(v))return _._entries(v||{}).map(function(S){var M=S[0],K=S[1];return{key:M,value:K}});if(_.isArray(v))return v;throw new _.TemplateError("list filter: type not iterable")}m.list=o;function s(v){return v=E(v,""),v.toLowerCase()}m.lower=s;function c(v){return v==null?"":x.copySafeness(v,v.replace(/\r\n|\n/g,`<br />
`))}m.nl2br=c;function u(v){return v[Math.floor(Math.random()*v.length)]}m.random=u;function w(v){function S(M,K,$){K===void 0&&(K="truthy");var J=this,re=J.env.getTest(K);return _.toArray(M).filter(function(oe){return re.call(J,oe,$)===v})}return S}m.reject=w(!1);function L(v,S){return v.filter(function(M){return!M[S]})}m.rejectattr=L,m.select=w(!0);function b(v,S){return v.filter(function(M){return!!M[S]})}m.selectattr=b;function A(v,S,M,K){var $=v;if(S instanceof RegExp)return v.replace(S,M);typeof K>"u"&&(K=-1);var J="";if(typeof S=="number")S=""+S;else if(typeof S!="string")return v;if(typeof v=="number"&&(v=""+v),typeof v!="string"&&!(v instanceof x.SafeString))return v;if(S==="")return J=M+v.split("").join(M)+M,x.copySafeness(v,J);var re=v.indexOf(S);if(K===0||re===-1)return v;for(var Q=0,oe=0;re>-1&&(K===-1||oe<K);)J+=v.substring(Q,re)+M,Q=re+S.length,oe++,re=v.indexOf(S,Q);return Q<v.length&&(J+=v.substring(Q)),x.copySafeness($,J)}m.replace=A;function R(v){var S;return _.isString(v)?S=o(v):S=_.map(v,function(M){return M}),S.reverse(),_.isString(v)?x.copySafeness(v,S.join("")):S}m.reverse=R;function d(v,S,M){S=S||0;var K=Math.pow(10,S),$;return M==="ceil"?$=Math.ceil:M==="floor"?$=Math.floor:$=Math.round,$(v*K)/K}m.round=d;function f(v,S,M){for(var K=Math.floor(v.length/S),$=v.length%S,J=[],re=0,Q=0;Q<S;Q++){var oe=re+Q*K;Q<$&&re++;var he=re+(Q+1)*K,pe=v.slice(oe,he);M&&Q>=$&&pe.push(M),J.push(pe)}return J}m.slice=f;function k(v,S,M){return M===void 0&&(M=0),S&&(v=_.map(v,function(K){return K[S]})),M+v.reduce(function(K,$){return K+$},0)}m.sum=k,m.sort=x.makeMacro(["value","reverse","case_sensitive","attribute"],[],function(S,M,K,$){var J=this,re=_.map(S,function(oe){return oe}),Q=_.getAttrGetter($);return re.sort(function(oe,he){var pe=$?Q(oe):oe,ve=$?Q(he):he;if(J.env.opts.throwOnUndefined&&$&&(pe===void 0||ve===void 0))throw new TypeError('sort: attribute "'+$+'" resolved to undefined');return!K&&_.isString(pe)&&_.isString(ve)&&(pe=pe.toLowerCase(),ve=ve.toLowerCase()),pe<ve?M?1:-1:pe>ve?M?-1:1:0}),re});function F(v){return x.copySafeness(v,v)}m.string=F;function B(v,S){v=E(v,"");var M=/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,K=Z(v.replace(M,"")),$="";return S?$=K.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,`
`).replace(/\n\n\n+/g,`

`):$=K.replace(/\s+/gi," "),x.copySafeness(v,$)}m.striptags=B;function U(v){v=E(v,"");var S=v.split(" ").map(function(M){return P(M)});return x.copySafeness(v,S.join(" "))}m.title=U;function Z(v){return x.copySafeness(v,v.replace(/^\s*|\s*$/g,""))}m.trim=Z;function z(v,S,M,K){var $=v;if(v=E(v,""),S=S||255,v.length<=S)return v;if(M)v=v.substring(0,S);else{var J=v.lastIndexOf(" ",S);J===-1&&(J=S),v=v.substring(0,J)}return v+=K??"...",x.copySafeness($,v)}m.truncate=z;function se(v){return v=E(v,""),v.toUpperCase()}m.upper=se;function ue(v){var S=encodeURIComponent;if(_.isString(v))return S(v);var M=_.isArray(v)?v:_._entries(v);return M.map(function(K){var $=K[0],J=K[1];return S($)+"="+S(J)}).join("&")}m.urlencode=ue;var X=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,q=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,j=/^https?:\/\/.*$/,G=/^www\./,V=/\.(?:org|net|com)(?:\:|\/|$)/;function te(v,S,M){y(S)&&(S=1/0);var K=M===!0?' rel="nofollow"':"",$=v.split(/(\s+)/).filter(function(J){return J&&J.length}).map(function(J){var re=J.match(X),Q=re?re[1]:J,oe=Q.substr(0,S);return j.test(Q)?'<a href="'+Q+'"'+K+">"+oe+"</a>":G.test(Q)?'<a href="http://'+Q+'"'+K+">"+oe+"</a>":q.test(Q)?'<a href="mailto:'+Q+'">'+Q+"</a>":V.test(Q)?'<a href="http://'+Q+'"'+K+">"+oe+"</a>":J});return $.join("")}m.urlize=te;function ce(v){v=E(v,"");var S=v?v.match(/\w+/g):null;return S?S.length:null}m.wordcount=ce;function le(v,S){var M=parseFloat(v);return y(M)?S:M}m.float=le;var me=x.makeMacro(["value","default","base"],[],function(S,M,K){K===void 0&&(K=10);var $=parseInt(S,K);return y($)?M:$});m.int=me,m.d=m.default,m.e=m.escape},function(H,D,C){function _(y,O){y.prototype=Object.create(O.prototype),y.prototype.constructor=y,x(y,O)}function x(y,O){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,N){return I.__proto__=N,I},x(y,O)}var m=C(6),E=function(y){_(O,y);function O(I){var N;return N=y.call(this)||this,N.precompiled=I||{},N}var P=O.prototype;return P.getSource=function(N){return this.precompiled[N]?{src:{type:"code",obj:this.precompiled[N]},path:N}:null},O}(m);H.exports={PrecompiledLoader:E}},function(H,D,C){var _=C(2).SafeString;function x(u){return typeof u=="function"}D.callable=x;function m(u){return u!==void 0}D.defined=m;function E(u,w){return u%w===0}D.divisibleby=E;function y(u){return u instanceof _}D.escaped=y;function O(u,w){return u===w}D.equalto=O,D.eq=D.equalto,D.sameas=D.equalto;function P(u){return u%2===0}D.even=P;function I(u){return!u}D.falsy=I;function N(u,w){return u>=w}D.ge=N;function g(u,w){return u>w}D.greaterthan=g,D.gt=D.greaterthan;function T(u,w){return u<=w}D.le=T;function e(u,w){return u<w}D.lessthan=e,D.lt=D.lessthan;function n(u){return u.toLowerCase()===u}D.lower=n;function i(u,w){return u!==w}D.ne=i;function p(u){return u===null}D.null=p;function l(u){return typeof u=="number"}D.number=l;function h(u){return u%2===1}D.odd=h;function t(u){return typeof u=="string"}D.string=t;function r(u){return!!u}D.truthy=r;function a(u){return u===void 0}D.undefined=a;function o(u){return u.toUpperCase()===u}D.upper=o;function s(u){return typeof Symbol<"u"?!!u[Symbol.iterator]:Array.isArray(u)||typeof u=="string"}D.iterable=s;function c(u){var w=u!=null&&typeof u=="object"&&!Array.isArray(u);return Set?w&&!(u instanceof Set):w}D.mapping=c},function(H,D,C){function _(E){var y=-1;return{current:null,reset:function(){y=-1,this.current=null},next:function(){return y++,y>=E.length&&(y=0),this.current=E[y],this.current}}}function x(E){E=E||",";var y=!0;return function(){var O=y?"":E;return y=!1,O}}function m(){return{range:function(y,O,P){typeof O>"u"?(O=y,y=0,P=1):P||(P=1);var I=[];if(P>0)for(var N=y;N<O;N+=P)I.push(N);else for(var g=y;g>O;g+=P)I.push(g);return I},cycler:function(){return _(Array.prototype.slice.call(arguments))},joiner:function(y){return x(y)}}}H.exports=m},function(H,D,C){var _=C(4);H.exports=function(m,E){function y(O,P){if(this.name=O,this.path=O,this.defaultEngine=P.defaultEngine,this.ext=_.extname(O),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=(this.defaultEngine[0]!=="."?".":"")+this.defaultEngine)}return y.prototype.render=function(P,I){m.render(this.name,P,I)},E.set("view",y),E.set("nunjucksEnv",m),m}},function(H,D,C){var _=C(4),x=C(4),m=C(0),E=m._prettifyError,y=C(5),O=C(7),P=O.Environment,I=C(24);function N(n,i){return Array.isArray(i)?i.some(function(p){return n.match(p)}):!1}function g(n,i){i=i||{},i.isString=!0;var p=i.env||new P([]),l=i.wrapper||I;if(!i.name)throw new Error('the "name" option is required when compiling a string');return l([e(n,i.name,p)],i)}function T(n,i){i=i||{};var p=i.env||new P([]),l=i.wrapper||I;if(i.isString)return g(n,i);var h=_.existsSync(n)&&_.statSync(n),t=[],r=[];function a(c){_.readdirSync(c).forEach(function(u){var w=x.join(c,u),L=w.substr(x.join(n,"/").length),b=_.statSync(w);b&&b.isDirectory()?(L+="/",N(L,i.exclude)||a(w)):N(L,i.include)&&r.push(w)})}if(h.isFile())t.push(e(_.readFileSync(n,"utf-8"),i.name||n,p));else if(h.isDirectory()){a(n);for(var o=0;o<r.length;o++){var s=r[o].replace(x.join(n,"/"),"");try{t.push(e(_.readFileSync(r[o],"utf-8"),s,p))}catch(c){if(i.force)console.error(c);else throw c}}}return l(t,i)}function e(n,i,p){p=p||new P([]);var l=p.asyncFilters,h=p.extensionsList,t;i=i.replace(/\\/g,"/");try{t=y.compile(n,l,h,i,p.opts)}catch(r){throw E(i,!1,r)}return{name:i,template:t}}H.exports={precompile:T,precompileString:g}},function(H,D,C){function _(x,m){var E="";m=m||{};for(var y=0;y<x.length;y++){var O=JSON.stringify(x[y].name),P=x[y].template;E+="(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["+O+`] = (function() {
`+P+`
})();
`,m.asFunction&&(E+="return function(ctx, cb) { return nunjucks.render("+O+`, ctx, cb); }
`),E+=`})();
`}return E}H.exports=_},function(H,D,C){function _(){var x=this.runtime,m=this.lib,E=this.compiler.Compiler,y=this.parser.Parser,O=this.nodes,P=this.lexer,I=x.contextOrFrameLookup,N=x.memberLookup,g,T;E&&(g=E.prototype.assertType),y&&(T=y.prototype.parseAggregate);function e(){x.contextOrFrameLookup=I,x.memberLookup=N,E&&(E.prototype.assertType=g),y&&(y.prototype.parseAggregate=T)}x.contextOrFrameLookup=function(a,o,s){var c=I.apply(this,arguments);if(c!==void 0)return c;switch(s){case"True":return!0;case"False":return!1;case"None":return null;default:return}};function n(r){return{index:r.index,lineno:r.lineno,colno:r.colno}}if(O&&E&&y){var i=O.Node.extend("Slice",{fields:["start","stop","step"],init:function(a,o,s,c,u){s=s||new O.Literal(a,o,null),c=c||new O.Literal(a,o,null),u=u||new O.Literal(a,o,1),this.parent(a,o,s,c,u)}});E.prototype.assertType=function(a){a instanceof i||g.apply(this,arguments)},E.prototype.compileSlice=function(a,o){this._emit("("),this._compileExpression(a.start,o),this._emit("),("),this._compileExpression(a.stop,o),this._emit("),("),this._compileExpression(a.step,o),this._emit(")")},y.prototype.parseAggregate=function(){var a=this,o=n(this.tokens);o.colno--,o.index--;try{return T.apply(this)}catch(R){var s=n(this.tokens),c=function(){return m._assign(a.tokens,s),R};m._assign(this.tokens,o),this.peeked=!1;var u=this.peekToken();if(u.type!==P.TOKEN_LEFT_BRACKET)throw c();this.nextToken();for(var w=new i(u.lineno,u.colno),L=!1,b=0;b<=w.fields.length&&!this.skip(P.TOKEN_RIGHT_BRACKET);b++){if(b===w.fields.length)if(L)this.fail("parseSlice: too many slice components",u.lineno,u.colno);else break;if(this.skip(P.TOKEN_COLON))L=!0;else{var A=w.fields[b];w[A]=this.parseExpression(),L=this.skip(P.TOKEN_COLON)||L}}if(!L)throw c();return new O.Array(u.lineno,u.colno,[w])}}}function p(r,a,o,s){r=r||[],a===null&&(a=s<0?r.length-1:0),o===null?o=s<0?-1:r.length:o<0&&(o+=r.length),a<0&&(a+=r.length);for(var c=[],u=a;!(u<0||u>r.length||s>0&&u>=o||s<0&&u<=o);u+=s)c.push(x.memberLookup(r,u));return c}function l(r,a){return Object.prototype.hasOwnProperty.call(r,a)}var h={pop:function(a){if(a===void 0)return this.pop();if(a>=this.length||a<0)throw new Error("KeyError");return this.splice(a,1)},append:function(a){return this.push(a)},remove:function(a){for(var o=0;o<this.length;o++)if(this[o]===a)return this.splice(o,1);throw new Error("ValueError")},count:function(a){for(var o=0,s=0;s<this.length;s++)this[s]===a&&o++;return o},index:function(a){var o;if((o=this.indexOf(a))===-1)throw new Error("ValueError");return o},find:function(a){return this.indexOf(a)},insert:function(a,o){return this.splice(a,0,o)}},t={items:function(){return m._entries(this)},values:function(){return m._values(this)},keys:function(){return m.keys(this)},get:function(a,o){var s=this[a];return s===void 0&&(s=o),s},has_key:function(a){return l(this,a)},pop:function(a,o){var s=this[a];if(s===void 0&&o!==void 0)s=o;else{if(s===void 0)throw new Error("KeyError");delete this[a]}return s},popitem:function(){var a=m.keys(this);if(!a.length)throw new Error("KeyError");var o=a[0],s=this[o];return delete this[o],[o,s]},setdefault:function(a,o){return o===void 0&&(o=null),a in this||(this[a]=o),this[a]},update:function(a){return m._assign(this,a),null}};return t.iteritems=t.items,t.itervalues=t.values,t.iterkeys=t.keys,x.memberLookup=function(a,o,s){return arguments.length===4?p.apply(this,arguments):(a=a||{},m.isArray(a)&&l(h,o)?h[o].bind(a):m.isObject(a)&&l(t,o)?t[o].bind(a):N.apply(this,arguments))},e}H.exports=_}])})}(we)),we.exports}var $e=Ye();const ze=De($e);Le.extend(Me);be.init(window.init);window.CTFd=be;window.helpers=We;window.$=Te;window.dayjs=Le;window.nunjucks=ze;window.Howl=Ue.Howl;Te(()=>{Ke(),je(),Ve(Ge.urlRoot)});
