import"./main.min.js";import{r as lt,d as ct,f as dt,g as ut}from"../ezq.min.js";import{s as mt,M as P,T as ht,a as gt}from"../styles.min.js";import{h as ft}from"../utils.min.js";import{d as z}from"../dayjs.min.min.js";import{g as Et}from"../_commonjsHelpers.min.js";import{H as pt}from"../index.min.js";import{C as b}from"../core.min.js";import{c as U}from"../config.min.js";import"../jquery.min.js";import"../times.min.js";import"../events.min.js";import"../helpers.min.js";import"../patch.min.js";import"../api.min.js";import"../fetch.min.js";const _t="modulepreload",bt=function(a){return"/themes/core-bs5/static/"+a},V={},vt=function(s,o,e){let n=Promise.resolve();if(o&&o.length>0){let d=function(l){return Promise.all(l.map(g=>Promise.resolve(g).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=d(o.map(l=>{if(l=bt(l),l in V)return;V[l]=!0;const g=l.endsWith(".css"),E=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${E}`))return;const f=document.createElement("link");if(f.rel=g?"stylesheet":_t,g||(f.as="script"),f.crossOrigin="",f.href=l,h&&f.setAttribute("nonce",h),document.head.appendChild(f),g)return new Promise((w,u)=>{f.addEventListener("load",w),f.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return n.then(d=>{for(const c of d||[])c.status==="rejected"&&r(c.reason);return s().catch(r)})};var R={exports:{}};/*!
  * Bootstrap tab.js v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var wt=R.exports,Y;function yt(){return Y||(Y=1,function(a,s){(function(o,e){a.exports=e(lt(),ct(),dt(),ut())})(wt,function(o,e,n,r){const d="tab",h=".bs.tab",l=`hide${h}`,g=`hidden${h}`,E=`show${h}`,f=`shown${h}`,w=`click${h}`,u=`keydown${h}`,p=`load${h}`,y="ArrowLeft",C="ArrowRight",$="ArrowUp",N="ArrowDown",A="Home",v="End",_="active",S="fade",L="show",tt="dropdown",H=".dropdown-toggle",et=".dropdown-menu",q=`:not(${H})`,nt='.list-group, .nav, [role="tablist"]',st=".nav-item, .list-group-item",ot=`.nav-link${q}, .list-group-item${q}, [role="tab"]${q}`,W='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',M=`${ot}, ${W}`,rt=`.${_}[data-bs-toggle="tab"], .${_}[data-bs-toggle="pill"], .${_}[data-bs-toggle="list"]`;class T extends o{constructor(t){super(t),this._parent=this._element.closest(nt),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),e.on(this._element,u,i=>this._keydown(i)))}static get NAME(){return d}show(){const t=this._element;if(this._elemIsActive(t))return;const i=this._getActiveElem(),m=i?e.trigger(i,l,{relatedTarget:t}):null;e.trigger(t,E,{relatedTarget:i}).defaultPrevented||m&&m.defaultPrevented||(this._deactivate(i,t),this._activate(t,i))}_activate(t,i){if(!t)return;t.classList.add(_),this._activate(n.getElementFromSelector(t));const m=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(L);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),e.trigger(t,f,{relatedTarget:i})};this._queueCallback(m,t,t.classList.contains(S))}_deactivate(t,i){if(!t)return;t.classList.remove(_),t.blur(),this._deactivate(n.getElementFromSelector(t));const m=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(L);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),e.trigger(t,g,{relatedTarget:i})};this._queueCallback(m,t,t.classList.contains(S))}_keydown(t){if(![y,C,$,N,A,v].includes(t.key))return;t.stopPropagation(),t.preventDefault();const i=this._getChildren().filter(I=>!r.isDisabled(I));let m;if([A,v].includes(t.key))m=i[t.key===A?0:i.length-1];else{const I=[C,N].includes(t.key);m=r.getNextActiveElement(i,t.target,I,!0)}m&&(m.focus({preventScroll:!0}),T.getOrCreateInstance(m).show())}_getChildren(){return n.find(M,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,i){this._setAttributeIfNotExists(t,"role","tablist");for(const m of i)this._setInitialAttributesOnChild(m)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const i=this._elemIsActive(t),m=this._getOuterElement(t);t.setAttribute("aria-selected",i),m!==t&&this._setAttributeIfNotExists(m,"role","presentation"),i||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const i=n.getElementFromSelector(t);i&&(this._setAttributeIfNotExists(i,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(i,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,i){const m=this._getOuterElement(t);if(!m.classList.contains(tt))return;const I=(at,it)=>{const K=n.findOne(at,m);K&&K.classList.toggle(it,i)};I(H,_),I(et,L),m.setAttribute("aria-expanded",i)}_setAttributeIfNotExists(t,i,m){t.hasAttribute(i)||t.setAttribute(i,m)}_elemIsActive(t){return t.classList.contains(_)}_getInnerElement(t){return t.matches(M)?t:n.findOne(M,t)}_getOuterElement(t){return t.closest(st)||t}static jQueryInterface(t){return this.each(function(){const i=T.getOrCreateInstance(this);if(typeof t=="string"){if(i[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);i[t]()}})}}return e.on(document,w,W,function(B){["A","AREA"].includes(this.tagName)&&B.preventDefault(),!r.isDisabled(this)&&T.getOrCreateInstance(this).show()}),e.on(window,p,()=>{for(const B of n.find(rt))T.getOrCreateInstance(B)}),r.defineJQueryPlugin(T),T})}(R)),R.exports}yt();var D={exports:{}},At=D.exports,G;function Lt(){return G||(G=1,function(a,s){(function(o,e){a.exports=e()})(At,function(){return function(o,e,n){o=o||{};var r=e.prototype,d={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(l,g,E,f){return r.fromToBase(l,g,E,f)}n.en.relativeTime=d,r.fromToBase=function(l,g,E,f,w){for(var u,p,y,C=E.$locale().relativeTime||d,$=o.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],N=$.length,A=0;A<N;A+=1){var v=$[A];v.d&&(u=f?n(l).diff(E,v.d,!0):E.diff(l,v.d,!0));var _=(o.rounding||Math.round)(Math.abs(u));if(y=u>0,_<=v.r||!v.r){_<=1&&A>0&&(v=$[A-1]);var S=C[v.l];w&&(_=w(""+_)),p=typeof S=="string"?S.replace("%d",_):S(_,g,v.l,y);break}}if(g)return p;var L=y?C.future:C.past;return typeof L=="function"?L(p):L.replace("%s",p)},r.to=function(l,g){return c(l,g,this,!0)},r.from=function(l,g){return c(l,g,this)};var h=function(l){return l.$u?n.utc():n()};r.toNow=function(l){return this.to(h(this),l)},r.fromNow=function(l){return this.from(h(this),l)}}})}(D)),D.exports}var Tt=Lt();const It=Et(Tt);z.extend(It);b._internal.challenge={};let O=[],F=[];const J=a=>{const s=O.find(o=>o.id==a);if((s==null?void 0:s.type)==="hidden"){alert("You haven't unlocked this challenge yet!");return}Q(s)},j=a=>{const s=a.lastIndexOf("-"),o=a.slice(s+1),e=O.find(n=>n.id==o);Q(e)},Q=async a=>{var h,l,g,E,f,w;const s=document.getElementById("challenge-window"),[o,e]=await Promise.all([b.api.get_challenge({challengeId:a.id}),fetch(U.urlRoot+a.template).then(u=>u.text())]),n=await vt(()=>import(`${U.urlRoot+a.script}`),[]),r=b._internal.challenge;r.data=o.data,n!=null&&n.preRender&&n.preRender(),s.innerHTML=o.data.view,(h=document.getElementById("challenge-input"))==null||h.classList.add("form-control"),(l=document.getElementById("challenge-submit"))==null||l.classList.add("btn","btn-md","btn-outline-secondary","float-end");const d=s.querySelector(".modal-dialog"),c=(E=(g=window.init)==null?void 0:g.theme_settings)==null?void 0:E.challenge_window_size;d&&["sm","lg","xl"].includes(c)&&d.classList.add(`modal-${c}`),s.querySelectorAll(".challenge-solves").forEach(u=>{u.addEventListener("click",()=>Ot(a.id))}),requestAnimationFrame(()=>{new P(s).show()}),s.querySelectorAll("[data-bs-toggle='tooltip']").forEach(u=>{new ht(u)}),s.querySelectorAll(".nav-tabs a").forEach(u=>{u.addEventListener("click",p=>{p.preventDefault(),new gt(u).show()})}),(f=s.querySelector("#challenge-submit"))==null||f.addEventListener("click",async u=>{u.preventDefault();const p=u.target;p.disabled=!0;try{const y=await r.submit();Ct(y),await Z(),X()}catch(y){console.error("Submission error",y)}finally{p.disabled=!1}}),(w=s.querySelector("#challenge-input"))==null||w.addEventListener("keyup",u=>{var p;u.key==="Enter"&&((p=document.getElementById("challenge-submit"))==null||p.click())}),s.querySelectorAll(".load-hint").forEach(u=>{u.addEventListener("click",p=>{p.preventDefault(),St(u.dataset.hintId)})}),n!=null&&n.postRender&&n.postRender(),s.querySelectorAll("pre code").forEach(u=>{pt.highlightElement(u)}),history.replaceState(null,"",`#${a.name}-${a.id}`),document.getElementById("notification-wrapper").classList.add("d-none")};function Ct(a){var d,c;const s=a.data,o=document.getElementById("result-message"),e=document.getElementById("result-notification"),n=document.getElementById("challenge-input");e.className="alert alert-dismissible text-center w-100 show",o.textContent=s.message;const r=document.createElement("div");if(r.className="col-md-12 pb-3",r.innerHTML="<button class='btn btn-info w-100'>Next Challenge</button>",r.querySelector("button").addEventListener("click",()=>{P.getInstance(document.getElementById("challenge-window")).hide(),setTimeout(()=>J(b._internal.challenge.data.next_id),500)}),s.status==="authentication_required"){window.location=`${b.config.urlRoot}/login?next=${b.config.urlRoot}${window.location.pathname}${window.location.hash}`;return}switch(s.status){case"incorrect":document.getElementById("notification-wrapper").classList.remove("d-none"),e.classList.add("alert-danger"),n.classList.remove("correct"),n.classList.add("wrong");break;case"correct":if(document.getElementById("notification-wrapper").classList.remove("d-none"),e.classList.add("alert-success"),document.querySelector(".challenge-solves")){const h=parseInt(document.querySelector(".challenge-solves").textContent)||0;document.querySelector(".challenge-solves").textContent=`${h+1} Solves`}n.value="",n.classList.remove("wrong"),n.classList.add("correct"),b._internal.challenge.data.next_id&&((d=document.querySelector(".submit-row"))==null||d.replaceChildren(r));break;case"already_solved":document.getElementById("notification-wrapper").classList.remove("d-none"),e.classList.add("alert-info"),n.classList.add("correct"),b._internal.challenge.data.next_id&&((c=document.querySelector(".submit-row"))==null||c.replaceChildren(r));break;case"paused":case"ratelimited":document.getElementById("notification-wrapper").classList.remove("d-none"),e.classList.add("alert-warning"),n.classList.add("too-fast");break}setTimeout(()=>{e.classList.remove("show"),n.classList.remove("wrong","too-fast")},3e3)}function St(a){b.api.get_hint({hintId:a}).then(s=>{if(!s.success){const e=Object.values(s.errors).join(`
`);x("Hint Error",`<div class="text-danger">${e}</div>`);return}const o=s.data;if(o.html){console.log("showing the hint contents: "+o.html),x(o.title||"Hint",o.html);return}if(confirm("Are you sure you want to unlock this hint?")){const e={target:a,type:"hints"};b.api.post_unlock_list({},e).then(n=>{var r;n.success?b.api.get_hint({hintId:a}).then(d=>x(d.data.title||"Hint",d.data.html)):x("Hint Error",`<div class="text-danger">${((r=n.errors)==null?void 0:r.score)||"Unable to unlock hint."}</div>`)})}})}function x(a,s){const o=document.createElement("div");o.className="modal fade",o.tabIndex=-1,o.innerHTML=`
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">${a}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body"></div>
      </div>
    </div>
  `,o.querySelector(".modal-body").innerHTML=s,document.body.appendChild(o),new P(o).show(),o.addEventListener("hidden.bs.modal",()=>{o.remove()})}function X(){O.forEach(a=>{if(a.solved_by_me){const s=document.querySelector(`button[value='${a.id}']`);s&&(s.classList.add("solved-challenge"),s.insertAdjacentHTML("afterbegin","<i class='fas fa-check corner-button-check'></i>"))}})}function Ot(a){return b.api.get_challenge_solves({challengeId:a}).then(s=>{const o=s.data,e=document.getElementById("challenge-solves-names");document.querySelector(".challenge-solves").textContent=`${o.length} Solves`,e.innerHTML="",o.forEach(n=>{const r=document.createElement("tr");r.innerHTML=`<td><a href="${n.account_url}">${ft(n.name)}</a></td><td>${z(n.date).fromNow()}</td>`,e.appendChild(r)})})}function Z(){return b.api.get_challenge_list().then(a=>{O=a.data;const s=document.getElementById("challenges-board");s.innerHTML="",[...new Set(O.map(e=>e.category))].forEach(e=>{const n=e.replace(/ /g,"-"),r=document.createElement("div");r.id=`${n}-row`,r.className="pt-5",r.innerHTML=`
        <div class="category-header col-md-12 mb-3">
          <h3>${e}</h3>
        </div>
        <div class="category-challenges col-md-12">
          <div class="challenges-row col-md-12"></div>
        </div>`,s.appendChild(r)}),O.forEach(e=>{const n=e.name.replace(/ /g,"-"),r=e.category.replace(/ /g,"-"),d=document.createElement("div");d.id=n,d.className="col-md-3 d-inline-block me-3";const c=document.createElement("button");c.className=`btn btn-dark challenge-button w-100 text-truncate pt-3 pb-3 mb-2${F.includes(e.id)?" solved-challenge":""}`,c.value=e.id,c.innerHTML=`
        ${F.includes(e.id)?"<i class='fas fa-check corner-button-check'></i>":""}
        <p>${e.name}</p>
        <span>${e.value}</span>`,e.tags.forEach(l=>{d.classList.add(`tag-${l.value.replace(/ /g,"-")}`)}),d.appendChild(c);const h=document.querySelector(`#${r}-row .challenges-row`);h&&h.appendChild(d),c.addEventListener("click",()=>J(c.value))})})}function k(){return Z().then(X)}document.readyState!=="loading"?k().then(()=>{window.location.hash.length>0&&j(decodeURIComponent(window.location.hash.substring(1)))}):document.addEventListener("DOMContentLoaded",()=>{k().then(()=>{window.location.hash.length>0&&j(decodeURIComponent(window.location.hash.substring(1)))})});mt();setInterval(k,3e5);window.updateChallengeBoard=k;
